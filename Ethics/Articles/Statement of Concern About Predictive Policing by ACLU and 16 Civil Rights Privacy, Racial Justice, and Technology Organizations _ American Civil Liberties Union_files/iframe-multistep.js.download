"undefined"==typeof WeakMap&&function(){var defineProperty=Object.defineProperty,counter=Date.now()%1e9,WeakMap=function(){this.name="__st"+(1e9*Math.random()>>>0)+counter+++"__"};WeakMap.prototype={set:function(key,value){var entry=key[this.name];return entry&&entry[0]===key?entry[1]=value:defineProperty(key,this.name,{value:[key,value],writable:!0}),this},get:function(key){var entry;return(entry=key[this.name])&&entry[0]===key?entry[1]:void 0},delete:function(key){var entry=key[this.name];return!(!entry||entry[0]!==key)&&(entry[0]=entry[1]=void 0,!0)},has:function(key){var entry=key[this.name];return!!entry&&entry[0]===key}},window.WeakMap=WeakMap}(),function(global){if(!global.JsMutationObserver){var setImmediate,registrationsTable=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))setImmediate=setTimeout;else if(window.setImmediate)setImmediate=window.setImmediate;else{var setImmediateQueue=[],sentinel=String(Math.random());window.addEventListener("message",(function(e){if(e.data===sentinel){var queue=setImmediateQueue;setImmediateQueue=[],queue.forEach((function(func){func()}))}})),setImmediate=function(func){setImmediateQueue.push(func),window.postMessage(sentinel,"*")}}var currentRecord,recordWithOldValue,isScheduled=!1,scheduledObservers=[],uidCounter=0;JsMutationObserver.prototype={observe:function(target,options){var node;if(node=target,target=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(node)||node,!options.childList&&!options.attributes&&!options.characterData||options.attributeOldValue&&!options.attributes||options.attributeFilter&&options.attributeFilter.length&&!options.attributes||options.characterDataOldValue&&!options.characterData)throw new SyntaxError;var registration,registrations=registrationsTable.get(target);registrations||registrationsTable.set(target,registrations=[]);for(var i=0;i<registrations.length;i++)if(registrations[i].observer===this){(registration=registrations[i]).removeListeners(),registration.options=options;break}registration||(registration=new Registration(this,target,options),registrations.push(registration),this.nodes_.push(target)),registration.addListeners()},disconnect:function(){this.nodes_.forEach((function(node){for(var registrations=registrationsTable.get(node),i=0;i<registrations.length;i++){var registration=registrations[i];if(registration.observer===this){registration.removeListeners(),registrations.splice(i,1);break}}}),this),this.records_=[]},takeRecords:function(){var copyOfRecords=this.records_;return this.records_=[],copyOfRecords}},Registration.prototype={enqueue:function(record){var observer,records=this.observer.records_,length=records.length;if(records.length>0){var recordToReplaceLast=selectRecord(records[length-1],record);if(recordToReplaceLast)return void(records[length-1]=recordToReplaceLast)}else observer=this.observer,scheduledObservers.push(observer),isScheduled||(isScheduled=!0,setImmediate(dispatchCallbacks));records[length]=record},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(node){var options=this.options;options.attributes&&node.addEventListener("DOMAttrModified",this,!0),options.characterData&&node.addEventListener("DOMCharacterDataModified",this,!0),options.childList&&node.addEventListener("DOMNodeInserted",this,!0),(options.childList||options.subtree)&&node.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(node){var options=this.options;options.attributes&&node.removeEventListener("DOMAttrModified",this,!0),options.characterData&&node.removeEventListener("DOMCharacterDataModified",this,!0),options.childList&&node.removeEventListener("DOMNodeInserted",this,!0),(options.childList||options.subtree)&&node.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(node){if(node!==this.target){this.addListeners_(node),this.transientObservedNodes.push(node);var registrations=registrationsTable.get(node);registrations||registrationsTable.set(node,registrations=[]),registrations.push(this)}},removeTransientObservers:function(){var transientObservedNodes=this.transientObservedNodes;this.transientObservedNodes=[],transientObservedNodes.forEach((function(node){this.removeListeners_(node);for(var registrations=registrationsTable.get(node),i=0;i<registrations.length;i++)if(registrations[i]===this){registrations.splice(i,1);break}}),this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var name=e.attrName,namespace=e.relatedNode.namespaceURI,target=e.target;(record=new getRecord("attributes",target)).attributeName=name,record.attributeNamespace=namespace;var oldValue=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;forEachAncestorAndObserverEnqueueRecord(target,(function(options){if(options.attributes&&(!options.attributeFilter||!options.attributeFilter.length||-1!==options.attributeFilter.indexOf(name)||-1!==options.attributeFilter.indexOf(namespace)))return options.attributeOldValue?getRecordWithOldValue(oldValue):record}));break;case"DOMCharacterDataModified":var record=getRecord("characterData",target=e.target);oldValue=e.prevValue;forEachAncestorAndObserverEnqueueRecord(target,(function(options){if(options.characterData)return options.characterDataOldValue?getRecordWithOldValue(oldValue):record}));break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var addedNodes,removedNodes,changedNode=e.target;"DOMNodeInserted"===e.type?(addedNodes=[changedNode],removedNodes=[]):(addedNodes=[],removedNodes=[changedNode]);var previousSibling=changedNode.previousSibling,nextSibling=changedNode.nextSibling;(record=getRecord("childList",e.target.parentNode)).addedNodes=addedNodes,record.removedNodes=removedNodes,record.previousSibling=previousSibling,record.nextSibling=nextSibling,forEachAncestorAndObserverEnqueueRecord(e.relatedNode,(function(options){if(options.childList)return record}))}currentRecord=recordWithOldValue=void 0}},global.JsMutationObserver=JsMutationObserver,global.MutationObserver||(global.MutationObserver=JsMutationObserver,JsMutationObserver._isPolyfilled=!0)}function dispatchCallbacks(){isScheduled=!1;var observers=scheduledObservers;scheduledObservers=[],observers.sort((function(o1,o2){return o1.uid_-o2.uid_}));var anyNonEmpty=!1;observers.forEach((function(observer){var queue=observer.takeRecords();!function(observer){observer.nodes_.forEach((function(node){var registrations=registrationsTable.get(node);registrations&&registrations.forEach((function(registration){registration.observer===observer&&registration.removeTransientObservers()}))}))}(observer),queue.length&&(observer.callback_(queue,observer),anyNonEmpty=!0)})),anyNonEmpty&&dispatchCallbacks()}function forEachAncestorAndObserverEnqueueRecord(target,callback){for(var node=target;node;node=node.parentNode){var registrations=registrationsTable.get(node);if(registrations)for(var j=0;j<registrations.length;j++){var registration=registrations[j],options=registration.options;if(node===target||options.subtree){var record=callback(options);record&&registration.enqueue(record)}}}}function JsMutationObserver(callback){this.callback_=callback,this.nodes_=[],this.records_=[],this.uid_=++uidCounter}function MutationRecord(type,target){this.type=type,this.target=target,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function getRecord(type,target){return currentRecord=new MutationRecord(type,target)}function getRecordWithOldValue(oldValue){return recordWithOldValue||((record=new MutationRecord((original=currentRecord).type,original.target)).addedNodes=original.addedNodes.slice(),record.removedNodes=original.removedNodes.slice(),record.previousSibling=original.previousSibling,record.nextSibling=original.nextSibling,record.attributeName=original.attributeName,record.attributeNamespace=original.attributeNamespace,record.oldValue=original.oldValue,(recordWithOldValue=record).oldValue=oldValue,recordWithOldValue);var original,record}function selectRecord(lastRecord,newRecord){return lastRecord===newRecord?lastRecord:recordWithOldValue&&((record=lastRecord)===recordWithOldValue||record===currentRecord)?recordWithOldValue:null;var record}function Registration(observer,target,options){this.observer=observer,this.target=target,this.options=options,this.transientObservedNodes=[]}}(self),function(root,factory){"object"==typeof module&&module.exports?module.exports=factory():"function"==typeof define&&define.amd?define(factory):root.Spinner=factory()}(this,(function(){"use strict";var useCssAnimations,sheet,prefixes=["webkit","Moz","ms","O"],animations={};function createEl(tag,prop){var n,el=document.createElement(tag||"div");for(n in prop)el[n]=prop[n];return el}function ins(parent){for(var i=1,n=arguments.length;i<n;i++)parent.appendChild(arguments[i]);return parent}function addAnimation(alpha,trail,i,lines){var name=["opacity",trail,~~(100*alpha),i,lines].join("-"),start=.01+i/lines*100,z=Math.max(1-(1-alpha)/trail*(100-start),alpha),prefix=useCssAnimations.substring(0,useCssAnimations.indexOf("Animation")).toLowerCase(),pre=prefix&&"-"+prefix+"-"||"";return animations[name]||(sheet.insertRule("@"+pre+"keyframes "+name+"{0%{opacity:"+z+"}"+start+"%{opacity:"+alpha+"}"+(start+.01)+"%{opacity:1}"+(start+trail)%100+"%{opacity:"+alpha+"}100%{opacity:"+z+"}}",sheet.cssRules.length),animations[name]=1),name}function vendor(el,prop){var pp,i,s=el.style;if(void 0!==s[prop=prop.charAt(0).toUpperCase()+prop.slice(1)])return prop;for(i=0;i<prefixes.length;i++)if(void 0!==s[pp=prefixes[i]+prop])return pp}function css(el,prop){for(var n in prop)el.style[vendor(el,n)||n]=prop[n];return el}function merge(obj){for(var i=1;i<arguments.length;i++){var def=arguments[i];for(var n in def)void 0===obj[n]&&(obj[n]=def[n])}return obj}function getColor(color,idx){return"string"==typeof color?color:color[idx%color.length]}var el,defaults={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};function Spinner(o){this.opts=merge(o||{},Spinner.defaults,defaults)}if(Spinner.defaults={},merge(Spinner.prototype,{spin:function(target){this.stop();var self=this,o=self.opts,el=self.el=createEl(null,{className:o.className});if(css(el,{position:o.position,width:0,zIndex:o.zIndex,left:o.left,top:o.top}),target&&target.insertBefore(el,target.firstChild||null),el.setAttribute("role","progressbar"),self.lines(el,self.opts),!useCssAnimations){var alpha,i=0,start=(o.lines-1)*(1-o.direction)/2,fps=o.fps,f=fps/o.speed,ostep=(1-o.opacity)/(f*o.trail/100),astep=f/o.lines;!function anim(){i++;for(var j=0;j<o.lines;j++)alpha=Math.max(1-(i+(o.lines-j)*astep)%f*ostep,o.opacity),self.opacity(el,j*o.direction+start,alpha,o);self.timeout=self.el&&setTimeout(anim,~~(1e3/fps))}()}return self},stop:function(){var el=this.el;return el&&(clearTimeout(this.timeout),el.parentNode&&el.parentNode.removeChild(el),this.el=void 0),this},lines:function(el,o){var seg,i=0,start=(o.lines-1)*(1-o.direction)/2;function fill(color,shadow){return css(createEl(),{position:"absolute",width:o.scale*(o.length+o.width)+"px",height:o.scale*o.width+"px",background:color,boxShadow:shadow,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*i+o.rotate)+"deg) translate("+o.scale*o.radius+"px,0)",borderRadius:(o.corners*o.scale*o.width>>1)+"px"})}for(;i<o.lines;i++)seg=css(createEl(),{position:"absolute",top:1+~(o.scale*o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:useCssAnimations&&addAnimation(o.opacity,o.trail,start+i*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&ins(seg,css(fill("#000","0 0 4px #000"),{top:"2px"})),ins(el,ins(seg,fill(getColor(o.color,i),"0 0 1px rgba(0,0,0,.1)")));return el},opacity:function(el,i,val){i<el.childNodes.length&&(el.childNodes[i].style.opacity=val)}}),"undefined"!=typeof document){el=createEl("style",{type:"text/css"}),ins(document.getElementsByTagName("head")[0],el),sheet=el.sheet||el.styleSheet;var probe=css(createEl("group"),{behavior:"url(#default#VML)"});!vendor(probe,"transform")&&probe.adj?function(){function vml(tag,attr){return createEl("<"+tag+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',attr)}sheet.addRule(".spin-vml","behavior:url(#default#VML)"),Spinner.prototype.lines=function(el,o){var r=o.scale*(o.length+o.width),s=2*o.scale*r;function grp(){return css(vml("group",{coordsize:s+" "+s,coordorigin:-r+" "+-r}),{width:s,height:s})}var i,margin=-(o.width+o.length)*o.scale*2+"px",g=css(grp(),{position:"absolute",top:margin,left:margin});function seg(i,dx,filter){ins(g,ins(css(grp(),{rotation:360/o.lines*i+"deg",left:~~dx}),ins(css(vml("roundrect",{arcsize:o.corners}),{width:r,height:o.scale*o.width,left:o.scale*o.radius,top:-o.scale*o.width>>1,filter:filter}),vml("fill",{color:getColor(o.color,i),opacity:o.opacity}),vml("stroke",{opacity:0}))))}if(o.shadow)for(i=1;i<=o.lines;i++)seg(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=o.lines;i++)seg(i);return ins(el,g)},Spinner.prototype.opacity=function(el,i,val,o){var c=el.firstChild;o=o.shadow&&o.lines||0,c&&i+o<c.childNodes.length&&(c=(c=(c=c.childNodes[i+o])&&c.firstChild)&&c.firstChild)&&(c.opacity=val)}}():useCssAnimations=vendor(probe,"animation")}return Spinner})),function($){var MutationSelectorObserver=function(selector,callback){this.selector=selector,this.callback=callback},msobservers=[];msobservers.initialize=function(selector,callback){var seen=[];callbackOnce=function(){-1==seen.indexOf(this)&&(seen.push(this),$(this).each(callback))},$(selector).each(callbackOnce),this.push(new MutationSelectorObserver(selector,callbackOnce))},new MutationObserver((function(mutations){for(var j=0;j<msobservers.length;j++)$(msobservers[j].selector).each(msobservers[j].callback)})).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),$.fn.initialize=function(callback){msobservers.initialize(this.selector,callback)}}(jQuery),function($){Drupal.behaviors.FormJS={attach:function(context,settings){"use strict";var inputEvents="input";"oninput"in document||"oninput"in $("<input>")[0]||(inputEvents+=" keypress keyup");var iframes=$("iframe"),params=window.location.search;$.each(iframes,(function(index,value){var src=$(value).attr("src");$(value).attr("src",src+params)})),jQuery.fn.restrict=function(sanitizationFunc){return this.each((function(){var $this=$(this);$this.bind(inputEvents,(function(){var val=$this.val(),sanitizedVal=sanitizationFunc(val);val!==sanitizedVal&&$this.val(sanitizedVal)}))}))},jQuery.fn.regexRestrict=function(regex){$(this).restrict((function(text){return text.replace(regex,"")}))},Number.prototype.formatMoney=function(c,d,t){var n=this,s=(c=isNaN(c=Math.abs(c))?2:c,d=null==d?",":d,t=null==t?".":t,n<0?"-":""),i=parseInt(n=Math.abs(+n||0).toFixed(c))+"",j=(j=i.length)>3?j%3:0;return s+(j?i.substr(0,j)+t:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+t)+(c?d+Math.abs(n-i).toFixed(c).slice(2):"")},jQuery.fn.alphanumeric=function(r){alphanumericHelper(this,r,!0,!0,!1)},jQuery.fn.numeric=function(r){alphanumericHelper(this,r,!1,!0,!1)},jQuery.fn.alpha=function(r){alphanumericHelper(this,r,!0,!1,!1)},jQuery.fn.alphanumericSpaces=function(r){alphanumericHelper(this,r,!0,!0,!0)},jQuery.fn.numericSpaces=function(r){alphanumericHelper(this,r,!1,!0,!0)},jQuery.fn.alphaSpaces=function(r){alphanumericHelper(this,r,!0,!1,!0)};var alphanumericHelper=function(obj,restraints,alpha,numeric,spaces){var regex="";spaces&&(regex+=" "),numeric&&(regex+="0-9"),alpha&&(null!=restraints&&restraints.allcaps||(regex+="a-z"),null!=restraints&&restraints.nocaps||(regex+="A-Z")),null!=restraints&&null!=restraints.allow&&(regex+=RegExp.escape(restraints.allow)),$(obj).regexRestrict(RegExp("[^"+regex+"]","g"))};if(RegExp.escape=function(text){return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},String.prototype.endsWith||(String.prototype.endsWith=function(searchString,position){var subjectString=this.toString();("number"!=typeof position||!isFinite(position)||Math.floor(position)!==position||position>subjectString.length)&&(position=subjectString.length),position-=searchString.length;var lastIndex=subjectString.indexOf(searchString,position);return-1!==lastIndex&&lastIndex===position}),$(document).ready((function(){function configUpdateCityAndStateByZip(zipId,cityId,stateId,countryId,v){var zipObj=$(zipId+" input",v),cityObj=$(cityId+" input",v),stateObj=$(stateId+" select",v),countryObj=$(countryId+" select",v);1==zipObj.length&&1==cityObj.length&&1==stateObj.length&&1==countryObj.length&&zipObj.bind("blur",(function(){!/^\d{5}$/.test($(this).val())||840!=countryObj.val()||""!=cityObj.val().trim()&&""!=stateObj.val().trim()||$.ajax({url:"/aclu_custom/autopop-city-state-by-zip",dataType:"json",type:"POST",data:"zip="+$(this).val(),success:function(result,success){if(""==cityObj.val().trim()&&cityObj.val(result.city),""==stateObj.val().trim()){stateObj.val(result.state_id);var targetOption=stateObj.find("option[value="+result.state_id+"]");stateObj.next().filter(".custom-select").find("span > span").html(targetOption.html())}}})}))}$(".form-item").each((function(){if($(this).find(".description").length){var desc_text=$(this).find(".description").text();$(this).find("label").append('<span class="help-text visuallyhidden">'+desc_text+"</span>")}})),$(".description").each((function(){if($(this).html().match(/(<p>)(\s*By Clicking.*your credit card will be processed.*)/i)){var new_desc=$(this).html().replace(/(<p>)(\s*By Clicking.*your credit card will be processed.*)/i,'<p tabindex="-1">$2');$(this).prev("div").html().match(/type\=[\'|\"]submit[\'|\"]/i)&&$(this).prev("div").prepend("<span class='visuallyhidden'>"+new_desc+"</span>")}})),$(".webform-confirmation").length&&$("#container").addClass("confirmation"),$("#webform-component-privacy-policy p").attr("tabindex",0),$(".quicksign-label-container .quicksign-label").attr("tabindex",0),$(".quicksign-description p").attr("tabindex",0),$(".webform-user-wrapper").initialize((function(){$(this).html('<div class="processing-spinner"></div><p class="processing-text">Thank you! Your submission is being processed.</p>');new Spinner({lines:13,length:3,width:2,radius:3,corners:.5,rotate:0,direction:1,color:"#000",speed:1,trail:25,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"50%",left:"50%"}).spin()})),$.fn.customSelect=function(settings){var config={replacedClass:"replaced",customSelectClass:"custom-select",activeClass:"active",wrapperElement:'<div class="custom-select-container" />'};settings&&$.extend(config,settings),this.each((function(){var select=$(this);select.addClass(config.replacedClass),select.wrap(config.wrapperElement);var update=function(){var val=$("option:selected",this).text();span.find("span span").text(val)};select.change(update),select.keyup(update);var span=$('<span class="'+config.customSelectClass+'" aria-hidden="true"><span><span>'+$("option:selected",this).text()+"</span></span></span>");select.after(span)}))},-1!=navigator.appVersion.indexOf("Mac")?$("html").addClass("mac"):$("html").addClass("pc"),navigator.userAgent.indexOf("Chrome")>-1&&$("html").addClass("chrome"),-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&$("html").addClass("safari"),navigator.userAgent.indexOf("Firefox")>-1&&$("html").addClass("firefox"),navigator.userAgent.indexOf("MSIE")>-1&&$("html").addClass("ie"),$("#webform-component-billing-information--zip").append('<span class="screenreader-only">Filling out zip code will auto-populate your city and state/province below.</span>'),$("form.webform-client-form").each((function(i,v){configUpdateCityAndStateByZip("#webform-component-billing-information--zip","#webform-component-billing-information--city","#webform-component-billing-information--state","#webform-component-billing-information--country",v)})),$("#node-content .body blockquote").each((function(index){0==$(this).find("p").length&&$(this).wrapInner("<p>")})),$("form.webform-client-form").each((function(i,v){configUpdateCityAndStateByZip("#webform-component-billing-information--zip","#webform-component-billing-information--city","#webform-component-billing-information--state","#webform-component-billing-information--country",v)})),$("ul.article_tools li.share, #block-aclu_blocks-video_share div.share").show(),$("ul.article_tools a.toggle").bind("click",(function(event){event.preventDefault();var $share=$(this).siblings("ul");"hidden"==$share.css("visibility")?$share.css("visibility","visible"):$share.css("visibility","hidden")})),$("#find input.form-submit").hide();var name=$("#edit-submit").attr("value");$("#submit-value").html(name),$("#edit-search-theme-form-1, #findmultimedia #edit-keyword, #browsecases #edit-keyword, #edit-search, #edit-search-1, #rep_resolverzip5, #rep_resolverzip4, #email, #footer_default form#signup #signup_email_footer").focus((function(){this.value==this.defaultValue&&$(this).attr("value","")})).blur((function(){this.value.length||$(this).attr("value",this.defaultValue)})),$(".meta-type a").bind("mouseover",(function(event){$(this).parent(".meta-type").parent().addClass("highlight")})).bind("mouseout",(function(event){$(this).parent(".meta-type").parent().removeClass("highlight")})),$("#search #edit-submit, #edit-long-submit").bind("mouseover",(function(event){$(this).addClass("highlight")})).bind("mouseout",(function(event){$(this).removeClass("highlight")})),$.fn.listenForChange=function(options){settings=$.extend({interval:200},options);var jquery_object=this,current_focus=null;return jquery_object.filter(":input").add(":input",jquery_object).filter('[type="text"],[type="radio"],[type="checkbox"],[type="file"],textarea').focus((function(){current_focus=this})).blur((function(){current_focus=null})),window.furryBrainsInterval=setInterval((function(){jquery_object.filter(":input").add(":input",jquery_object).filter('[type="text"],[type="radio"],[type="checkbox"],[type="file"],textarea').each((function(){null!=$(this).data("change_listener")?$(this).data("change_listener")!=$(this).val()&&this!=current_focus&&$(this).val()&&$(this).prev().hide():$(this).data("change_listener",$(this).val())}))}),settings.interval),this},$(".default-form-wrapper #content form").each((function(index){var form_id=$(this).attr("id");$("#"+form_id+" select").each((function(){$(this).hasClass("custom")||($(this).addClass("custom"),$(this).prev().andSelf().wrapAll('<div class="select">'),$(this).customSelect())}))})),$(".default-form-wrapper #content form").each((function(index,formContext){var formSelectorID="#"+$(this).attr("id")+" ";$(formSelectorID+'input[type="checkbox"]').each((function(){var parentElement=$(this).parent(),attr=parentElement.attr("for");void 0!==attr&&!1!==attr&&$(this).insertBefore(parentElement)})),$(formSelectorID+".webform-component-fieldset legend").each((function(){if(!$(this).hasClass("collapse-processed")&&$(this).html().toLowerCase().indexOf("(optional)")>=0){var wrapOptional=$(this).html().replace(/\(optional\)/i,"<span class='legend-paren-text'>(optional)</span>");$(this).html(wrapOptional)}}))}))})),$(".webform-confirmation .sb_social_default_style > .social-share-link",context).wrap("<p></p>"),$(".webform-confirmation .sb_social_button_email").parent().insertAfter($(".sb_social_button_twitter").parent()),$("form.webform-client-form",context).once("detect-phone-scenario",(function(){function syncOptInFields(){$('input[type=checkbox][name^="submitted"][name$="[sms_opt_in][1]"]',this)[0].checked?$('input[type=hidden][name^="submitted"][name$="[mobile_autodial_opt_in]"]',this).val("1"):$('input[type=hidden][name^="submitted"][name$="[mobile_autodial_opt_in]"]',this).val("")}!function(){return 1===$('input[type=text][name^="submitted"][name$="[mobile_phone_number]"]',this).length&&1===$('input[type=hidden][name^="submitted"][name$="[field_phone_type]"]',this).length&&1===$('input[type=hidden][name^="submitted"][name$="[sms_opt_in]"]',this).length&&1===$('input[type=hidden][name^="submitted"][name$="[mobile_autodial_opt_in]"]',this).length}()?!function(){return 1===$('input[type=text][name^="submitted"][name$="[sbp_phone]"]',this).length&&1===$('select[name^="submitted"][name$="[field_phone_type]"]',this).length&&1===$('input[type=checkbox][name^="submitted"][name$="[sms_opt_in][1]"]',this).length&&1===$('input[type=hidden][name^="submitted"][name$="[mobile_autodial_opt_in]"]',this).length}()?function(){return 1===$('input:not(.required)[type=text][name^="submitted"][name$="[sbp_phone]"]',this).length&&1===$('input[type=hidden][name^="submitted"][name$="[field_phone_type]"]',this).length&&0===$('input[type=hidden][name^="submitted"][name$="[sms_opt_in]"]',this).length&&0===$('input[type=hidden][name^="submitted"][name$="[mobile_autodial_opt_in]"]',this).length&&"PhoneOptionalTypeUnknownOptinImplicit"===$('input[type=hidden][name^="submitted"][name$="[phone_scenario]"]',this).val()}()||function(){return 1===$('input.required[type=text][name^="submitted"][name$="[sbp_phone]"]',this).length&&1===$('input[type=hidden][name^="submitted"][name$="[field_phone_type]"]',this).length&&1===$('input[type=checkbox][name^="submitted"][name$="[sms_opt_in][1]"]',this).length&&1===$('input[type=hidden][name^="submitted"][name$="[mobile_autodial_opt_in]"]',this).length&&"PhoneRequiredTypeUnknownOptinExplicitScenario"===$('input[type=hidden][name^="submitted"][name$="[phone_scenario]"]',this).val()}()&&$(this).submit((function(){syncOptInFields()})):$(this).submit((function(){"Home"===$('select[name^="submitted"][name$="[field_phone_type]"]',this).val()&&($('input[type=checkbox][name^="submitted"][name$="[sms_opt_in][1]"]',this)[0].checked=!1),syncOptInFields()})):$(this).submit((function(){0===$.trim($('input[type=text][name^="submitted"][name$="[mobile_phone_number]"]',this).val()).length?($('input[type=text][name^="submitted"][name$="[mobile_phone_number]"]',this).val(""),$('input[type=hidden][name^="submitted"][name$="[field_phone_type]"]',this).val(""),$('input[type=hidden][name^="submitted"][name$="[sms_opt_in]"]',this).val(""),$('input[type=hidden][name^="submitted"][name$="[mobile_autodial_opt_in]"]',this).val("")):($('input[type=hidden][name^="submitted"][name$="[field_phone_type]"]',this).val("Cell"),$('input[type=hidden][name^="submitted"][name$="[sms_opt_in]"]',this).val("1"),$('input[type=hidden][name^="submitted"][name$="[mobile_autodial_opt_in]"]',this).val("1"))}))})),$("form.webform-client-form",context).once("ppp-salesforce-donor-preference",(function(){$(this).submit((function(){$('input[type=hidden][name^="submitted"][name$="[sms_opt_in]"]',this).length&&$('input[type=hidden][name^="submitted"][name$="[sms_opt_in]"]',this).val()||$('input[type=checkbox][name^="submitted"][name$="[sms_opt_in][1]"]',this)[0]&&$('input[type=checkbox][name^="submitted"][name$="[sms_opt_in][1]"]',this)[0].checked?$('input[name="submitted[salesforce_donor_preference]"]',this).val("PPP"):$('input[name="submitted[salesforce_donor_preference]"]',this).val("")}))})),$(".preference-center-container",context).length>0){$("body").addClass("pref-center-page");var frameTarget="https://aclu.secure.force.com/ManageEmails"+document.location.search;$('<iframe src="'+frameTarget+'" frameborder="0" scrolling="no" id="myFrame"></iframe>').appendTo(".preference-center-container"),$("#main-content>h1").hide()}var queryStrings=Drupal.behaviors.FormJS.getQueryParams(document.location.search),sms_rev_id_input=$('input[name$="[sms_rev_id]"]',context);queryStrings.hasOwnProperty("sms_rev_id")&&sms_rev_id_input.length>0&&sms_rev_id_input.once("sms-rev-id-set-from-url-parameter").val(queryStrings.sms_rev_id);var membership_id_input=$('input[name$="[membership_id]"]',context);queryStrings.hasOwnProperty("membership_id")&&membership_id_input.length>0&&membership_id_input.once("membership-id-set-from-url-parameter").val(queryStrings.membership_id)}},Drupal.behaviors.Countdown={attach:function(context,settings){"use strict";$(".countdown-end-datetime",context).each((function(){function updateCountdown(countdownEndTime,countdownTickerElement){var timeRemainingInCountdown=countdownEndTime-(new Date).getTime();if(timeRemainingInCountdown<0)clearInterval(interval);else{var days=Math.floor(timeRemainingInCountdown/864e5),dayLabel=1===days?"day":"days",hours=Math.floor(timeRemainingInCountdown%864e5/36e5),hoursLabel=1===hours?"hour":"hours",minutes=Math.floor(timeRemainingInCountdown%36e5/6e4),minutesLabel=1===minutes?"min":"mins",seconds=Math.floor(timeRemainingInCountdown%6e4/1e3),secondsLabel=1===seconds?"sec":"secs",updatedCountDownTickerElementHTML="<div class='countdown-col'><div class='countdown-num'>"+zeroPad(days,2)+"</div><div class='countdown-unit'>"+dayLabel+"</div></div><div class='countdown-colon countdown-col'>:</div><div class='countdown-col'><div class='countdown-num'>"+zeroPad(hours,2)+"</div><div class='countdown-unit'>"+hoursLabel+"</div></div><div class='countdown-colon countdown-col'>:</div><div class='countdown-col'><div class='countdown-num'>"+zeroPad(minutes,2)+"</div><div class='countdown-unit'>"+minutesLabel+"</div></div><div class='countdown-colon countdown-col'>:</div><div class='countdown-col'><div class='countdown-num'>"+zeroPad(seconds,2)+"</div><div class='countdown-unit'>"+secondsLabel+"</div></div>";timeRemainingInCountdown<432e5&&(updatedCountDownTickerElementHTML='<span class="imminent-deadline">'+updatedCountDownTickerElementHTML+"</span>"),countdownTickerElement.html(updatedCountDownTickerElementHTML)}}function zeroPad(num,size){var s="0"+num;return s.substr(s.length-size)}var countdownEndTime,countdownStartTime;$(this).attr("data-end")&&(countdownEndTime=$(this).attr("data-end").trim().replace(/-/g,"/"),countdownEndTime=new Date(countdownEndTime).getTime()),$(this).attr("data-start")&&(countdownStartTime=$(this).attr("data-start").trim().replace(/-/g,"/"),countdownStartTime=new Date(countdownStartTime).getTime());var now=(new Date).getTime();if(countdownEndTime&&now<countdownEndTime&&(!countdownStartTime||now>=countdownStartTime)){var countdownTickerElement=$('<div class="countdown-ticker" aria-live="off"></div>');$(this).replaceWith(countdownTickerElement),countdownTickerElement.after('<span class="screenreader-only">This is a countdown clock, counting down till the new year.</span>');var interval=setInterval(updateCountdown,1e3,countdownEndTime,countdownTickerElement);updateCountdown(countdownEndTime,countdownTickerElement)}}))}},Drupal.behaviors.FormJS.getQueryParams=function(qs){qs=qs.split("+").join(" ");for(var tokens,params={},regex=/[?&]?([^=]+)=([^&]*)/g;tokens=regex.exec(qs);)params[decodeURIComponent(tokens[1])]=decodeURIComponent(tokens[2]);return params},Drupal.behaviors.FormJS.getQueryParamValue=function(parameter,queryString){var parameters=Drupal.behaviors.FormJS.getQueryParams(queryString);return!!parameters.hasOwnProperty(parameter)&&parameters[parameter]},Drupal.behaviors.actOnCaptcha={attach:function(context,settings){"use strict";$(".captcha",context).once("general-captcha-changes",(function(){($(".node-type-donation-form").length&&0===$(".multistep-donation").length||$(".node-type-ticketed-event").length||$(".node-type-p2p-donation-form").length)&&($("fieldset.captcha #edit-captcha-response, fieldset.captcha .error, fieldset.captcha .description",context).wrapAll('<div class="captcha-extra-info"></div>'),$(".captcha-extra-info").parent().addClass("one-line-desktop"))}))}}}(jQuery),function($){Drupal.behaviors.DonationFormJS={attach:function(context,settings){function showForm(formSelectorID){$(formSelectorID).find("fieldset:not(:first,'#webform-component-extra-fields')").show(),$(formSelectorID).find("#edit-actions").show(),$(formSelectorID).find("#edit-submit").show(),$(formSelectorID).find(".donation-processing-wrapper").hide().css("display","none")}function hideForm(formSelectorID){$(formSelectorID).find("#webform-component-donor-information").hide(),$(formSelectorID).find("#webform-component-billing-information").hide(),$(formSelectorID).find("#webform-component-payment-information").hide(),$(formSelectorID).find("#edit-actions").hide()}Drupal.behaviors.DonationFormJS.acluSubmitPaypal=function(event){setTimeout((function(){try{Drupal.braintreeInstance.submitPaypalFields(document.createEvent("Event"))}catch(err){setTimeout((function(){Drupal.braintreeInstance.submitPaypalFields(document.createEvent("Event"))}),1e3)}}),500)},$.fn.isAfter=function(sel){return 0!==this.prevAll().filter(sel).length},$.fn.isBefore=function(sel){return 0!==this.nextAll().filter(sel).length},$.event.special.destroyed={remove:function(o){o.handler&&o.handler()}};$(document).ready((function(){$('input[name="submitted[google_click_id]"]').once("populate-google-click-id-field",(function(){var gclid=Drupal.behaviors.FormJS.getQueryParamValue("gclid",document.location.search);gclid&&$('input[name="submitted[google_click_id]"]').val(gclid)})),$(".node form, .node-type-p2p-donation-form form.fundraiser-donation-form").each((function(){var formSelectorID="#"+$(this).attr("id")+" ";(!$.browser.mozilla||"1.9"!=$.browser.version.substr(0,3)&&"1.8"!=$.browser.version.substr(0,3))&&$(formSelectorID+"#edit-submitted-payment-information-payment-fields-credit").wrapAll('<div class="credit-card-info-wrapper"><div class="cc-info-holder"></div></div>')})),$(".donation-processing-wrapper").initialize((function(){$(this).html('<p class="processing-thank-you">Thank you.</p><p class="processing-text">Your donation is being processed.</p><div class="processing-spinner"></div>');var target=$(this);new Spinner({lines:13,length:3,width:2,radius:3,corners:.5,rotate:0,direction:1,color:"#000",speed:1,trail:25,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"50%",left:"50%"}).spin(target)})),$(".webform-client-form").submit((function(){$(window).unload((function(){$(".webform-client-form").trigger("reset")}))})),$("#edit-submitted-credit-card-information-card-number").numeric(),$("#edit-submitted-credit-card-information-card-cvv").numeric(),$("#edit-submitted-credit-card-information-card-expiration-date-day").hide(),$("#edit-submitted-donation-quantity").change((function(){$("#total").empty();var total=this.value*$("#webform-component-donation--amount input:radio:checked").val();$("#edit-submitted-donation-quantity").after('<p id="total">Total: $'+total+"</p>")})),$("#edit-submitted-donation-other-amount").change((function(){""!=$(this).val()&&$(":radio[value=other]").attr("checked",!0)})),$("input[name*=amount][type=radio]").each((function(){var value=$(this).val();if(void 0!==value&&$.isNumeric(value)&&(id=$(this).prop("id"),"undefined"!=typeof id&&id.length>0)){if(void 0!==Drupal.settings.fundraiser&&void 0!==Drupal.settings.fundraiser.currency&&void 0!==Drupal.settings.fundraiser.currency.symbol)var symbol=Drupal.settings.fundraiser.currency.symbol;else symbol="$";$("label[for="+id+"]").text(symbol+parseFloat(value).toLocaleString("en"))}})),$(".node-type-donation-form .default-form-wrapper #webform-component-donation--other-amount").addClass("other-amount-wrapper"),$(".node-type-p2p-donation-form .default-form-wrapper #webform-component-donation--other-amount").addClass("other-amount-wrapper"),$(".node-type-donation-form .default-form-wrapper #webform-component-donation--recurring-other-amount").addClass("recurring-other-amount-wrapper"),$(".node-type-p2p-donation-form .default-form-wrapper #webform-component-donation--recurring-other-amount").addClass("recurring-other-amount-wrapper");var donationType=$("input[type='hidden'][name='submitted[donation][recurs_monthly]']").val(),donationRadioAmountsBlock=$("#edit-submitted-donation-amount"),donationRecurringRadioAmountsBlock=$("#edit-submitted-donation-recurring-amount"),otherID=$("#webform-component-donation--amount").find('input[type="radio"][value="other"]').attr("id"),recurOtherID=$("#webform-component-donation--recurring-amount").find('input[type="radio"][value="other"]').attr("id");if("recurs"==donationType?$(".other-amount-wrapper",context).isAfter($("#"+otherID).parent().closest("div"))||$(".other-amount-wrapper",context).insertAfter(donationRadioAmountsBlock.find("div.form-type-radio").last()):($(".other-amount-wrapper",context).isAfter($("#"+otherID).parent().closest("div"))||$(".other-amount-wrapper",context).insertAfter(donationRadioAmountsBlock.find("div.form-type-radio").last()),$(".recurring-other-amount-wrapper",context).isAfter($("#"+recurOtherID).parent().closest("div"))||$(".recurring-other-amount-wrapper",context).insertAfter(donationRecurringRadioAmountsBlock.find("div.form-type-radio").last())),$(".account-accNum").length>0&&0==$(".sample-check").length){$(".account-accNum").after("<div class='sample-check'><p class='sample-check__title form-required-info'>Sample check</p><img src='https://static.aclu.org/images/sample-check-retina.png' alt='Illustration of a sample check showing routing number at the left bottom corner and account number at the bottom center.' /></div>")}})),$(window).load((function(){var paypalChecked,paypalAvailable,recurringClicked,optionClass=new Array,win=(optionClass=new Array,$(this)),isMultistep=$(".multistep-donation").length,showOtherField=isMultistep?"block":"inline-flex";if($(".logged-in").length){var errorMsg="<div class='aclu error'>Paypal is misconfigured. Consult the documentation for proper setup. Contact web_tech@aclu.org if you need assistance.</div>";$("#paypal-container").length>0?($("#webform-component-extra-fields--payment-options input[type='radio'][value='1']").length>0?$("#edit-submitted-extra-fields-payment-options .form-type-radio:last-of-type").addClass("good-config"):($(".message-wrapper").addClass("missing-payment-config1"),$(".message-wrapper").prepend(errorMsg)),void 0===Drupal.behaviors.braintreePaypal&&($(".message-wrapper").addClass("missing-bt-functions"),$(".message-wrapper").prepend(errorMsg))):$("#webform-component-extra-fields--payment-options input[type='radio'][value='1']").length>0&&($(".message-wrapper").addClass("missing-payment-config2"),$(".message-wrapper").prepend(errorMsg))}$(".node-type-donation-form .action-donation-form .custom-title").length>0&&$(".node-type-donation-form .action-donation-form .custom-title").insertBefore("#secondary-advo-title"),$(".node-type-donation-form .action-donation-form #webform-component-c4-disclaimer").length>0&&$(".node-type-donation-form .action-donation-form #webform-component-c4-disclaimer").appendTo(".field-name-body"),$(".node-type-donation-form .action-donation-form #webform-component-c3-disclaimer").length>0&&$(".node-type-donation-form .action-donation-form #webform-component-c3-disclaimer").appendTo(".field-name-body"),$(".node-type-donation-form .action-donation-form .aclu-donate-share-simple").length>0&&$(".node-type-donation-form .action-donation-form .aclu-donate-share-simple").insertAfter(".field-name-body"),$(".not-logged-in").length&&$(".node-type-donation-form .action-donation-form").length&&$(".alert.status").addClass("not-logged-in"),$(".node-type-donation-form .default-form-wrapper #content .page-title").length>0&&$(".default-form-wrapper #content .field-name-field-aclu-subtitle").length>0&&($(".default-form-wrapper #content .field-name-field-aclu-subtitle").wrap("<div class='page-subtitle'><h2></h2></div>"),$(".default-form-wrapper #content .page-subtitle").insertAfter(".page-title")),$(".node-type-donation-form .default-form-wrapper #content .field-name-field-aclu-right-column").length>0&&($(".default-form-wrapper #content .field-name-field-aclu-right-column").prependTo(".field-name-body"),$(".field-name-body").addClass("right-content")),$(".node-type-donation-form #webform-component-form-body-header").length>0&&($(".node-type-donation-form #webform-component-form-body-header").prependTo(".field-name-body"),$(".field-name-body").addClass("body-header-content")),curPath=window.location.pathname,curPath.toLowerCase().indexOf("canvass")>=0&&($("body").addClass("canvass"),curPath.toLowerCase().indexOf("one-time")>=0?$("body").addClass("one-time"):curPath.toLowerCase().indexOf("monthly")>=0&&$("body").addClass("monthly")),$("#webform-component-donation--amount #edit-submitted-donation-amount.form-text").length&&$("#webform-component-donation--recurring-amount.control-group.webform-component-hidden").length&&($("#edit-submitted-donation-amount.form-text").addClass("text-amount"),$(".field-prefix").next().andSelf().wrapAll("<div class='amount-text-field-wrapper'></div>")),$(".default-form-wrapper #content form").once("styled",(function(){$(".default-form-wrapper #content form").each((function(index,formContext){var form_id=$(this).attr("id"),formSelectorID="#"+form_id+" ";if(optionClass[form_id]=null,paypalChecked="paypal"===$('#webform-component-payment-information--payment-method input[type="radio"]:checked').val(),paypalAvailable=$('#webform-component-payment-information--payment-method input[value="paypal"]').length>0,recurringClicked="recurs"===$('#webform-component-donation--recurs-monthly input[type="radio"]:checked').val(),optionClass[form_id]=null,recurringClicked&&$("#webform-component-payment-information--payment-method").hide(),$(formSelectorID+".form-item-submitted-payment-information-payment-fields-credit-card-cvv").length>0&&$(formSelectorID+".form-item-submitted-payment-information-payment-fields-credit-card-cvv").addClass("security-code-wrapper"),$(formSelectorID+"div").filter((function(){return null!=(" "+$(this).attr("id")+" ").match(/webform-component-payment-information-.*-may-we-share-your-info/)})).find("label:first").addClass("custom-width"),$(formSelectorID+"label").filter((function(){return null!=(" "+$(this).attr("for")+" ").match(/edit-submitted-payment-information-.*-may-we-share-your-info-\d*/)})).addClass("your-info-label"),$(formSelectorID+"#webform-component-payment-information--profile-may-we-share-your-info .description p").length){var description_html=" "+$(formSelectorID+"#webform-component-payment-information--profile-may-we-share-your-info .description p").html();$(formSelectorID+"#webform-component-payment-information--profile-may-we-share-your-info .description").remove(),$(formSelectorID+".your-info-label .help-text").remove(),$(formSelectorID+"#webform-component-payment-information--profile-may-we-share-your-info .your-info-label").append(description_html)}$(formSelectorID+"#edit-actions").next(".description").addClass("submit-description"),$(formSelectorID+"label:contains('Expiration Date')").addClass("other-input-label"),$(formSelectorID).attr("novalidate","novalidate"),$(".default-form-wrapper "+formSelectorID+"#webform-component-donation").addClass("donation-buttons"),$(".default-form-wrapper "+formSelectorID+"#webform-component-donation--recurs-monthly label:contains('Type')").addClass("donation-label"),$(".default-form-wrapper .singlestep-donation"+formSelectorID+"#webform-component-donation--amount").attr("tabindex",0),$(".node-type-donation-form .default-form-wrapper "+formSelectorID+"#webform-component-donation #webform-component-donation--other-amount .field-prefix, .node-type-donation-form .default-form-wrapper "+formSelectorID+"#webform-component-donation #webform-component-donation--recurring-other-amount .field-prefix").wrap("<div class='prefix-span-wrapper'></div>"),$(".node-type-p2p-donation-form .default-form-wrapper "+formSelectorID+"#webform-component-donation #webform-component-donation--other-amount .field-prefix, .node-type-p2p-donation-form .default-form-wrapper "+formSelectorID+"#webform-component-donation #webform-component-donation--recurring-other-amount .field-prefix").wrap("<div class='prefix-span-wrapper'></div>"),$(".default-form-wrapper "+formSelectorID+"#webform-component-donation--amount .form-radios").addClass("clearfix"),$(".node-type-donation-form .default-form-wrapper "+formSelectorID+"#webform-component-donation #webform-component-donation--other-amount .form-text, .node-type-donation-form .default-form-wrapper "+formSelectorID+"#webform-component-donation #webform-component-donation--recurring-other-amount .form-text").wrap("<span class='currency-in-input'></span>"),$(".node-type-p2p-donation-form .default-form-wrapper "+formSelectorID+"#webform-component-donation #webform-component-donation--other-amount .form-text, .node-type-p2p-donation-form .default-form-wrapper "+formSelectorID+"#webform-component-donation #webform-component-donation--recurring-other-amount .form-text").wrap("<span class='currency-in-input'></span>"),$(".default-form-wrapper "+formSelectorID+"#webform-component-donation #webform-component-donation--other-amount .currency-in-input, .default-form-wrapper "+formSelectorID+"#webform-component-donation #webform-component-donation--recurring-other-amount .currency-in-input").prepend("<span class='symbol'>$</span>"),$(".node-type-donation-form .default-form-wrapper "+formSelectorID+"#webform-component-donation .prefix-span-wrapper").prepend("<span class='prefix-text'>Enter Donation Amount</span>"),$(".node-type-p2p-donation-form .default-form-wrapper "+formSelectorID+"#webform-component-donation .prefix-span-wrapper").prepend("<span class='prefix-text'>Enter Donation Amount</span>"),$(".default-form-wrapper "+formSelectorID+" #edit-submitted-donation-recurs-monthly label").each((function(){"none"===$(this).css("display")&&($(this).parent().css("display","none"),$(this).css("display","")),"One-time"!=$.trim($(this).text())&&"Monthly"!=$.trim($(this).text())||($(this).children().not("input").wrapInner("<span class='button-label recurring-simple' rel='"+$(this).text()+"'><span>"),"Monthly"==$.trim($(this).text())&&($(this).parents("div").eq(0).addClass("monthly-wrapper"),$(".default-form-wrapper "+formSelectorID+"#webform-component-donation #recurring-message").addClass("show-msg")))})),$(formSelectorID+"label:contains('CVV')").addClass("other-input-label"),$(".default-form-wrapper "+formSelectorID+".form-item-submitted-payment-information-payment-fields-credit-expiration-date-card-expiration-month .custom-select-container").addClass("auto-size"),$(".default-form-wrapper "+formSelectorID+".form-item-submitted-payment-information-payment-fields-credit-expiration-date-card-expiration-month .select").addClass("auto-size"),$(".default-form-wrapper "+formSelectorID+"#webform-component-donation--amount .form-radios").addClass("clearfix"),$(formSelectorID+'input[type="text"]').each((function(){var inputLabel=$(formSelectorID+"label[for='"+$(this).attr("id")+"']");inputLabel.text().toLowerCase();if($(this).attr("id").match(/edit-submitted-donation-other-amount*/)&&inputLabel.addClass("hidden-element"),inputLabel.addClass("text-input-label"),$(".node-type-donation-form .default-form-wrapper, .node-type-p2p-donation-form .default-form-wrapper").length&&("edit-submitted-payment-information-payment-fields-credit-card-number"==$(this).attr("id")||"edit-submitted-donor-information-phone-number"==$(this).attr("id")||"edit-submitted-payment-information-payment-fields-credit-card-cvv"==$(this).attr("id"))){var numberInput=document.getElementById($(this).attr("id"));numberInput.addEventListener("touchstart",Drupal.behaviors.FormJS.touchStart,!1),numberInput.addEventListener("keydown blur",Drupal.behaviors.FormJS.touchType,!1)}})),$(formSelectorID+".webform-component-fieldset legend").each((function(){if(!$(this).hasClass("collapse-processed")&&$(this).html().toLowerCase().indexOf("(optional)")>=0){var wrapOptional=$(this).html().replace(/\(optional\)/i,"<span class='legend-paren-text'>(optional)</span>");$(this).html(wrapOptional)}})),$(formSelectorID+"input.required").each((function(){$(this).attr("aria-required","true"),$(this).attr("data-required","true")})),$(formSelectorID+".webform-component-textfield input").not(".required").each((function(){$(this).attr("aria-required","false"),$(this).attr("data-required","false"),$(this).siblings("label").append("(optional)")})),$(formSelectorID+".webform-component-radios.control-group").each((function(){$(this).attr("role","radiogroup"),"#webform-component-donation--recurring-amount"!=$(this).attr("id")&&"#webform-component-donation--amount"!=$(this).attr("id")||($(this).attr("aria-required","true"),$(this).find("label:first").attr("data-required","true"))}));var otherID=$("#webform-component-donation--amount").find('input[type="radio"][value="other"]').attr("id"),recurOtherID=$('webform-component-donation--recurring-amount"').find('input[type="radio"][value="other"]').attr("id"),otherLabelVal=$("#"+otherID).parents("div").find("label[for="+otherID+"]").addClass("other-label-amount").text(),recurOtherLabelVal=$("#"+recurOtherID).parents("div").find("label[for="+recurOtherID+"]").addClass("recur-other-label-amount").text();if("other"!==otherLabelVal.toLowerCase().trim()&&$(".other-label-amount").addClass("custom-label"),"other"!==recurOtherLabelVal.toLowerCase().trim()&&$(".recur-other-label-amount").addClass("custom-label"),$(formSelectorID+"#webform-component-donation .other-amount-wrapper, "+formSelectorID+"#webform-component-donation .recurring-other-amount-wrapper").length){for(var otherInputs=document.getElementsByName("submitted[donation][other_amount]"),i=0;otherID.length<i;i++)otherInputs[i].addEventListener("touchstart",Drupal.behaviors.FormJS.touchStart,!1),otherInputs[i].addEventListener("keydown blur",Drupal.behaviors.FormJS.touchType,!1);$(formSelectorID+"#webform-component-donation .other-amount-wrapper .form-text, "+formSelectorID+"#webform-component-donation .recurring-other-amount-wrapper .form-text").attr("inputmode","decimal"),$("#edit-submitted-payment-information-payment-fields-credit-card-cvv, #edit-submitted-payment-information-payment-fields-credit-card-number").attr("inputmode","numeric")}($(formSelectorID+"#webform-component-donation .other-amount-wrapper .form-text, "+formSelectorID+"#webform-component-donation .recurring-other-amount-wrapper .form-text").keyup((function(e){"188"!=e.keyCode&&"188"!=e.charCode||$(this).val($(this).val().replace(/,/g,""))})),paypalAvailable&&win.width()<=959)&&($(formSelectorID+"#webform-component-payment-information--email-opt-in").prependTo("#webform-component-extra-fields .fieldset-wrapper").addClass("emailoptin-moved"),$("#edit-submitted-payment-information-email-opt-in label.option").text("Get ACLU email updates"));function getDonationFormPos(){return $(".default-form-wrapper #webform-component-donor-information").offset()}if(($(formSelectorID+"#recurring-message .message").is(":visible")&&win.width()<=767||$("#donation-tabs").length>0)&&($(formSelectorID+"#webform-component-donation--recurs-monthly").width()<=589||$("#donation-tabs").length>0&&$(formSelectorID+"#webform-component-donation--recurs-monthly").width()<=804?$(formSelectorID+"#recurring-message .message").css("min-width","200px"):$(formSelectorID+"#webform-component-donation--recurs-monthly").width()>589&&$(formSelectorID+"#recurring-message .message").css("min-width","350px")),$(".default-form-wrapper "+formSelectorID+'#webform-component-donation input[type="radio"]').each((function(){var parentElement=$(this).parent(),attr=parentElement.attr("for");void 0!==attr&&!1!==attr&&$(this).insertBefore(parentElement),$(this).attr("value")>=1e3&&$(this).attr("value")<=9999?optionClass[form_id]="medium":$(this).attr("value")>=1e4?optionClass[form_id]="small":optionClass[form_id]="",$(this).addClass(optionClass[form_id])})),$(".default-form-wrapper "+formSelectorID+"#recurring-message").insertAfter($(formSelectorID+"#webform-component-donation--recurs-monthly")),$(".node-type-donation-form .default-form-wrapper "+formSelectorID+"#webform-component-extra-fields").appendTo($(formSelectorID+"#webform-component-donation")),$(".node-type-p2p-donation-form .default-form-wrapper "+formSelectorID+"#webform-component-extra-fields").appendTo($(formSelectorID+"#webform-component-donation")),$(formSelectorID+'#webform-component-extra-fields--payment-options input[type="radio"][value="0"]').parent().addClass("pay-with-cc"),$(formSelectorID+'#webform-component-extra-fields--payment-options input[type="radio"][value="1"]').parent().addClass("pay-with-other pay-with-paypal"),$(formSelectorID+'#webform-component-extra-fields--payment-options input[type="radio"][value="2"]').parent().addClass("pay-with-other pay-with-applepay"),$(formSelectorID+'#webform-component-extra-fields--payment-options input[type="radio"][value="3"]').parent().addClass("pay-with-other pay-with-bank"),$(".pay-with-bank").append('<div class="disclaimer">*US Bank Accounts Only</div>'),function(){var applepayPaymentMethodRadio=$("input[name='submitted[payment_information][payment_method]']").filter((function(){return"applepay"==this.value}));if(applepayPaymentMethodRadio.length>0){function updateDonationTypeBodyClass(){var donationType;$("input[type='radio'][name='submitted[donation][recurs_monthly]']").length?donationType=$("input[type='radio'][name='submitted[donation][recurs_monthly]']:checked").val():$("input[type='hidden'][name='submitted[donation][recurs_monthly]']").length&&(donationType=$("input[type='hidden'][name='submitted[donation][recurs_monthly]']").val()),"NO_RECURR"==donationType?$("body").addClass("onetime-donation-selected").removeClass("monthly-donation-selected"):"recurs"==donationType?$("body").addClass("monthly-donation-selected").removeClass("onetime-donation-selected"):$("body").removeClass("monthly-donation-selected").removeClass("onetime-donation-selected")}$("body").addClass("applepay-available"),$("#edit-submit").addClass("apple-pay-button-black apple-pay-button"),updateDonationTypeBodyClass(),$("input[name='submitted[donation][recurs_monthly]']").change(updateDonationTypeBodyClass)}else $(".pay-with-applepay").remove();var origSelectedPaymentMethodRadio=$("input[name='submitted[payment_information][payment_method]']:checked");applepayPaymentMethodRadio.bind("destroyed",(function(){applepayPaymentMethodRadio=null,$("body").removeClass("applepay-available"),$("#edit-submit").removeClass("apple-pay-button-black apple-pay-button"),$(".pay-with-applepay").remove(),origSelectedPaymentMethodRadio.prop("checked",!0),Drupal.acluDonationFormToggleChooseMethodText()}))}(),$("#webform-component-extra-fields .message-wrapper").length||$("#webform-component-extra-fields").append('<div class="message-wrapper" style="margin-top: 20px;"></div>'),$(".singlestep-donation "+formSelectorID+".pay-with-cc").click((function(e){$("#webform-component-extra-fields .message-wrapper").length&&!$("#webform-component-extra-fields .message-wrapper").is(":empty")&&$("#webform-component-extra-fields .message-wrapper").empty(),showForm(formSelectorID),$(formSelectorID).find("input[name='submitted[payment_information][payment_method]']").filter((function(){return"credit"==this.value})).trigger("click");var donationStartOffset=getDonationFormPos();$(jQuery.browser.webkit?"body":"html").animate({scrollTop:parseInt(donationStartOffset.top,10)},1e3)})),$(".singlestep-donation "+formSelectorID).find("input[name='submitted[payment_information][payment_method]']").filter((function(){return"paypal"==this.value})).click((function(e){Drupal.behaviors.DonationFormJS.acluSubmitPaypal(e)})),$(".singlestep-donation "+formSelectorID).find(".pay-with-paypal").click((function(e){var paypalRadio=$(formSelectorID).find("input[name='submitted[payment_information][payment_method]']").filter((function(){return"paypal"==this.value}));if(void 0!==$("#webform-component-donation--amount input:radio:checked").val())$("#webform-component-extra-fields .message-wrapper").length&&!$("#webform-component-extra-fields .message-wrapper").is(":empty")&&$("#webform-component-extra-fields .message-wrapper").empty(),jQuery(paypalRadio).click();else{$("#webform-component-extra-fields .message-wrapper").html('<div class=".alert.error" role="alert" style="border: solid 1px #cc0000; color: #cc0000"><button type="button" class="sb-msg-close" data-dismiss="alert">×</button><h2 class="element-invisible">Error message</h2><ul style="margin: 0"><li aria-label="Your donation amount must be greater than or equal to $5.00">Your donation amount must be greater than or equal to 5.00.</li></ul></div>')}hideForm(formSelectorID)})),$(".default-form-wrapper "+formSelectorID+'#webform-component-donation--amount input[type="radio"][name="submitted[donation][amount]"]').click((function(e){$(this).is(":checked")&&("other"===$(this).val()?$(".other-amount-wrapper").show():"other"!=$(this).val()&&($(window).width()<=959||isMultistep)&&$(".other-amount-wrapper").hide())})),$(".default-form-wrapper "+formSelectorID+'#webform-component-donation--recurring-amount input[type="radio"][name="submitted[donation][recurring_amount]"]').click((function(e){$(this).is(":checked")&&("other"===$(this).val()?$(".recurring-other-amount-wrapper").show():"other"!=$(this).val()&&($(window).width()<=959||isMultistep)&&$(".recurring-other-amount-wrapper").hide())})),paypalAvailable){var defaultPaypalRadio=$(formSelectorID).find("input[name='submitted[payment_information][payment_method]']").filter((function(){return"paypal"==this.value})),defaultPaypal=defaultPaypalRadio.parent(".form-item");defaultPaypal.addClass("paypal-radio"),$(formSelectorID).wrapInner("<div class='donation-buttons-wrapper'></div>"),recurringClicked&&defaultPaypal.hide(),$('input[type="radio"][name="submitted[donation][recurs_monthly]"]').change((function(){var formSelectorID="#"+$(this).closest("form").attr("id")+" ";if($(this).is(":checked")){var additionalPaymentButtons=$(formSelectorID+"#webform-component-extra-fields--payment-options .form-item-submitted-extra-fields-payment-options.pay-with-other"),recurringButtons=additionalPaymentButtons.filter(".pay-with-bank"),oneTimeButtons=additionalPaymentButtons.not(".pay-with-bank");"recurs"===$(this).val()?(defaultPaypal.hide(),defaultPaypalRadio.attr("disabled",!0),$(".progress-wrap").addClass("progress-wrap--monthly"),$(formSelectorID+"#webform-component-extra-fields--payment-options .form-item-submitted-extra-fields-payment-options.pay-with-other").show(),oneTimeButtons.hide(),recurringButtons.show(),0===recurringButtons.length?$(formSelectorID+"#webform-component-extra-fields--payment-message").show().css("display","inline-block"):$(formSelectorID+"#webform-component-extra-fields--payment-message").hide(),($(window).width()<959||isMultistep)&&("other"==$('#webform-component-donation--recurring-amount input:radio[name="submitted[donation][recurring_amount]"]:checked').val()?$(".recurring-other-amount-wrapper").show().css("display",showOtherField):$(".recurring-other-amount-wrapper").hide())):(defaultPaypal.show(),defaultPaypalRadio.attr("disabled",!1),$(".progress-wrap").removeClass("progress-wrap--monthly"),$(formSelectorID+"#webform-component-extra-fields--payment-message").hide(),recurringButtons.hide(),oneTimeButtons.show(),($(window).width()<959||isMultistep)&&("other"==$("#webform-component-donation--amount input:radio[name='submitted[donation][amount]']:checked").val()?$(".other-amount-wrapper").show().css("display",showOtherField):$(".other-amount-wrapper").hide()))}})),$('input[type="radio"][name="submitted[donation][recurs_monthly]"]').trigger("change"),$(formSelectorID+"#webform-component-extra-fields--payment-options").show().css("display","inline"),$(formSelectorID+"#webform-component-extra-fields--payment-options > .form-item").css("display","inline")}if($(window).width()<=767&&$("#container.singlestep-donation").length){$(formSelectorID+"#edit-submitted-donation-recurs-monthly-1").click((function(e){recurringClicked=!1;var amtOffset=$(formSelectorID+"#webform-component-donation--amount").offset();$(jQuery.browser.webkit?"body":"html").animate({scrollTop:parseInt(amtOffset.top,10)},1e3)})),$(formSelectorID+"#edit-submitted-donation-recurs-monthly-2").click((function(e){recurringClicked=!0;var amtOffset=$(formSelectorID+"#webform-component-donation--amount").offset();$(jQuery.browser.webkit?"body":"html").animate({scrollTop:parseInt(amtOffset.top,10)},1e3)}));var donationAmountRadios=$("#webform-component-donation input[type='radio']").filter((function(){return null!=(" "+$(this).attr("id")+" ").match(/edit-submitted-donation-.*amount.*-\d*/)}));paypalAvailable?donationAmountRadios.each((function(){"other"!==$(this).attr("value")&&$(this).click((function(e){if(recurringClicked=!0){var paymentOptionsOffset=$("#webform-component-extra-fields").offset();$("#edit-submitted-donation-other-amount-wrapper").is(":visible")&&(paymentOptionsOffset.top-=95),$(jQuery.browser.webkit?"body":"html").animate({scrollTop:parseInt(paymentOptionsOffset.top,10)})}else recurringClicked=!1}))})):donationAmountRadios.each((function(){"other"!==$(this).attr("value")&&$(this).click((function(e){var donationStartOffset=getDonationFormPos();$(formSelectorID+"#edit-submitted-donation-other-amount-wrapper").is(":visible")&&(donationStartOffset.top-=95),$(jQuery.browser.webkit?"body":"html").animate({scrollTop:parseInt(donationStartOffset.top,10)-15},1e3)}))}))}var urlParams={};!function(){for(var parsed,regex=/([^&=]+)=?([^&]*)/g,decode=function(value){return decodeURIComponent(value.replace(/\+/g," "))},querystring=window.location.search.substring(1);parsed=regex.exec(querystring);){var keyname=new String(decode(parsed[1]));urlParams[keyname.toLowerCase()]=decode(parsed[2])}}(),$(formSelectorID+".form-message-intro").length&&(paypalAvailable&&paypalChecked?hideForm(formSelectorID):showForm(formSelectorID))}))})),$(window).width()<=959&&$(document).one("braintree.methodChange",(function(event,paymentMethod){"credit"!=paymentMethod||Drupal.settings.braintree.paypal.collapsed||($("#webform-component-donor-information").hide(),$("#webform-component-billing-information").hide(),"NO_RECUR"===$('input[type="radio"][name="submitted[donation][recurs_monthly]"]:checked').val()&&$("#webform-component-extra-fields--payment-message").hide())})),$(window).resize((function(){win=$(window),clearTimeout(this.id),this.id=setTimeout((function(){(win=$(window)).width()<=767&&($(formSelectorID+"#webform-component-donation--recurs-monthly").width()<=589?$(formSelectorID+"#recurring-message .message").css("min-width","200px"):$(formSelectorID+"#webform-component-donation--recurs-monthly").width()>589&&$(formSelectorID+"#recurring-message .message").css("min-width","350px"));win.width()>959?(showForm(formSelectorID),$("#webform-component-extra-fields--payment-options").hide().css("display","none"),$('input[type="radio"][name="submitted[donation][recurs_monthly]"]').length&&$('input[type="radio"][name="submitted[donation][recurs_monthly]"]:checked').val().match(/^NO_RECUR(.*)/i)?"other"==$('#webform-component-donation--amount input:radio[name="submitted[donation][amount]"]:checked').val()?$(".other-amount-wrapper").show().css("display",showOtherField):$(".singlestep-donation .other-amount-wrapper").show().css("display",showOtherField):$('input[type="radio"][name="submitted[donation][recurs_monthly]"]').length&&"recurs"===$('input[type="radio"][name="submitted[donation][recurs_monthly]"]:checked').val()&&"other"==$('#webform-component-donation--recurring-amount input:radio[name="submitted[donation][recurring_amount]"]:checked').val()?$(".recurring-other-amount-wrapper").show().css("display",showOtherField):$(".singlestep-donation .recurring-other-amount-wrapper").show().css("display",showOtherField)):($("#webform-component-extra-fields--payment-options").show(),"other"==$('#webform-component-donation--amount input:radio[name="submitted[donation][amount]"]:checked').val()?$(".other-amount-wrapper").show().css("display",showOtherField):"other"==$('#webform-component-donation--recurring-amount input:radio[name="submitted[donation][recurring_amount]"]:checked').val()?$(".recurring-other-amount-wrapper").show().css("display",showOtherField):"other"!=$('input:radio[name="submitted[donation][amount]"]:checked').val()&&$(".other-amount-wrapper, .recurring-other-amount-wrapper").hide())}),500);var formSelectorID="#"+$(".node form.fundraiser-donation-form").attr("id")+" ",emailSub=$(formSelectorID+"#webform-component-payment-information--email-opt-in"),emailSub2=$(formSelectorID+"#webform-component-payment-information--profile-may-we-share-your-info");emailSub.length&&win.width()>959&&(emailSub.insertAfter("#webform-component-payment-information--payment-fields"),emailSub2.insertAfter("#webform-component-payment-information--email-opt-in"),$("#edit-submitted-payment-information-email-opt-in label.option").text("Sign up for ACLU emails to stay informed and take action to protect people's rights."),emailSub.removeClass("emailoptin-moved"),"NO_RECUR"===$(formSelectorID+'input[type="radio"][name="submitted[donation][recurs_monthly]"]:checked').val()&&$("#webform-component-extra-fields--payment-message").hide()),!emailSub.hasClass(".emailoptin-moved")&&paypalAvailable&&win.width()<=959&&(emailSub.prependTo("#webform-component-extra-fields .fieldset-wrapper").addClass("emailoptin-moved"),$("#edit-submitted-payment-information-email-opt-in label.option").text("Get ACLU email updates"),"NO_RECUR"===$(formSelectorID+'input[type="radio"][name="submitted[donation][recurs_monthly]"]:checked').val()&&$("#webform-component-extra-fields--payment-message").hide())}))}))}},Drupal.acluDonationFormToggleChooseMethodText=function(){Drupal.acluDonationFormShouldDisplayChooseMethodText()?$(".payment-method-message").length<1&&$("#webform-component-extra-fields--payment-options").prepend($('<div class="payment-method-message">Choose payment method</div>')):$(".payment-method-message").remove()},Drupal.acluDonationFormShouldDisplayChooseMethodText=function(){var numPaymentMethodsAvailable=Drupal.acluDonationFormGetNumberOfPaymentMethods();return numPaymentMethodsAvailable>1&&!(2==numPaymentMethodsAvailable&&1==$('input[name="submitted[payment_information][payment_method]"][value="applepay"]').length&&1==$('input[name="submitted[payment_information][payment_method]"][value="paypal"]').length)&&("recurs"!=$('input[name="submitted[donation][recurs_monthly]"]:checked').val()||1==$('input[name="submitted[payment_information][payment_method]"][value="bank account"]').length)},Drupal.acluDonationFormGetNumberOfPaymentMethods=function(){return $("#edit-submitted-payment-information-payment-method .form-item-submitted-payment-information-payment-method").length}}(jQuery),function($){Drupal.behaviors.DonationFormMultistepJS={attach:function(context,settings){var currentStep=0;$(".field-type-text-with-summary").prepend($(".page-title")),$(".field-name-field-aclu-summary .field-item").addClass("body-mobile").appendTo($(".field-name-body > .field-items")).prev().addClass("body-nonmobile"),$("#webform-component-payment-information--processing-fee",context).once("manipulate-processing-fee-field",(function(){$('[for="edit-submitted-payment-information-processing-fee"]').remove(),$(".form-item-submitted-payment-information-payment-fields-credit-card-cvv").after($(this)),$("#edit-submitted-payment-information-processing-fee-1").on("change",(function(){updateButtonText(getDonationAmount(),getDonationType())}))})),$(".node-type-donation-form #other-ways-to-give").once("move-other-ways-to-give-customize-footer",(function(){$("#webform-component-other-ways-to-give").length>0&&$("#webform-component-other-ways-to-give").html().trim().length>0?($(".donation-landing-section.row1 #other-ways-to-give").append($("#webform-component-other-ways-to-give")),$(".footer-wrapper").addClass("hide-border")):($(".donation-landing-section.row1").parent("aside").addClass("empty-section"),($("#webform-component-other-donation-info").length<1||$("#webform-component-other-donation-info").html().trim().length<1)&&$(".multistep-donation.default-form-wrapper.multistep-donation-landing .webform-client-form").css("position","relative"))})),$("#other-donation-info").once("move-other-donation-info",(function(){$(".donation-landing-section.row2 #other-donation-info").append($("#webform-component-other-donation-info"))})),$(".page-node-done .donation-landing-section.row1").once("move-ready-to-do-more-confirmation",(function(){$(".donation-landing-section.row1 .container .left-content").append($("#ready-to-do-more-confirmation")),0===$("#ready-to-do-more-confirmation").length?$(".donation-landing-section.row1").parent("aside").addClass("empty-section"):$("#ready-to-do-more-confirmation").hasClass("has-background-white")?($(".donation-landing-section.row1").parent("aside").addClass("has-background-white"),$(".donation-landing-section.row1").addClass("has-background-white"),$("#ready-to-do-more-confirmation").hasClass("has-background-yellow")&&$(".donation-landing-section.row1").removeClass("has-background-yellow")):$(".donation-landing-section.row1").parent("aside").addClass("has-background-yellow")})),$(".donation-landing-section.row2").once("move-questions-confirmation",(function(){$(".donation-landing-section.row2 .container .left-content").append($("#questions-confirmation")),$(".donation-landing-section.row2 .container").addClass("has-section-padding")})),$("#advocacy-social-share-block").once("move-advocacy-social-share-block",(function(){$("#advocacy-social-share-block .share-content").append($("#webform-component-advocacy-social-share-block"))})),$(".advocacy-donation-form .alert.status").once("move-alert-status-petition-confirmation-message",(function(){$(".advocacy-donation-form .message-wrapper .alert.status").appendTo(".petition-confirmation-message")}));var disclaimerObj=null;$("#webform-component-c4-disclaimer").length?disclaimerObj=$("#webform-component-c4-disclaimer"):$("#webform-component-c3-disclaimer").length&&(disclaimerObj=$("#webform-component-c3-disclaimer")),null!==disclaimerObj&&disclaimerObj.once().appendTo($(".field-name-body")),$("form.webform-client-form",context).once("initialize-breadcrumb",(function(){$(this).prepend($(".donation-steps")),$(".donation-steps .step-wrapper div.step").wrapAll('<div class="breadcrumb-nav" aria-hidden="true"><ol></ol></div>'),$(".donation-steps .step-wrapper div:not(.breadcrumb-nav)").wrap("<li></li>"),$(".donation-steps").prepend('<div id="help-message" class="element-invisible element-focusable">If you encounter a technical issue completing this form, <a href="https://www.aclu.org/donate-aclu">select this link to find a single page version of this form</a> or <a href="mailto:membership@aclu.org">please contact us at membership@aclu.org</a></div>')}));var $otherAmountFields=$("#edit-submitted-donation-other-amount, #edit-submitted-donation-recurring-other-amount"),$oneTimeAskAmounts=$("#webform-component-donation--amount"),$monthlyAskAmounts=$("#webform-component-donation--recurring-amount"),$donationFields=$("#webform-component-donation"),$paymentFields=$("#webform-component-payment-information"),$contactFields=$("#webform-component-donor-information"),$billingFields=$("#webform-component-billing-information");function isDonationLandingForm(){return $(".multistep-donation-landing").length>0}function getDonationAmount(){if($("#webform-component-donation--recurs-monthly").length)var selectedAskValue=$('#edit-submitted-donation-recurs-monthly input[type="radio"][value="NO_RECURR"]').is(":checked")?$oneTimeAskAmounts.find(".form-type-radio input:checked").val():$monthlyAskAmounts.find(".form-type-radio input:checked").val();else selectedAskValue=$oneTimeAskAmounts.find(".form-type-radio input:checked").val();var selectAmount=(selectedAskValue="other"===selectedAskValue?0:selectedAskValue)||0,otherAmount=0;return $otherAmountFields.each((function(){if($(this).val())return otherAmount=$(this).val(),!1})),Number(selectAmount>otherAmount?selectAmount:otherAmount)}function getDonationType(){return $("#webform-component-donation--recurs-monthly").length?$('#edit-submitted-donation-recurs-monthly input[type="radio"][value="recurs"]').is(":checked")?"monthly":"one-time":"recurs"==$('input[type="hidden"][name="submitted[donation][recurs_monthly]"]').val()?"monthly":"one-time"}function updateButtonText(donationAmount,type){$(".processing-fee-message").length&&(donationAmount=$(".processing-fee-message").html().replace(/[^\d.-]/g,""),donationAmount=parseFloat(donationAmount));var donationAmountDisplay=donationAmount%1==0?donationAmount:donationAmount.toFixed(2),buttonText="Donate $"+(donationAmountDisplay=donationAmountDisplay.toLocaleString());buttonText="monthly"===type?buttonText+" Monthly":buttonText,$(".progress-wrap .complete").html(buttonText)}function toggleFormPosition(mediaQueryEvt){mediaQueryEvt.matches&&!$(".webform-client-form").hasClass("pinned-donation-form")?($(".webform-client-form").addClass("pinned-donation-form"),$(".webform-client-form.pinned-donation-form").appendTo($("#advocacy-social-share-block .container .pin-form-top .content"))):$(".webform-client-form").hasClass("pinned-donation-form")&&($(".webform-client-form.pinned-donation-form").appendTo($(".node-donation-form .right-content")),$(".webform-client-form").removeClass("pinned-donation-form"))}function goTo(direction){if("+"==direction&&!validateStep(currentStep))return;var previousStep=currentStep;return"+"==direction?currentStep+1<=3&&(currentStep+=1):currentStep-1>=0&&(currentStep-=1),$(".fieldset-step.step-"+currentStep).find(".step-errors").remove(),function(nextStep){if(1==nextStep){var donationAmount=getDonationAmount();if(donationAmount){var type=getDonationType();addReminderMessage(type),updateButtonText(donationAmount,type)}}}(currentStep),updateStepDisplay(previousStep,currentStep),$("html, body").animate({scrollTop:$(".webform-client-form").offset().top},500),$(".step-header.step-"+currentStep).focus(),!1}function updateStepDisplay(previousStep,step){$(".fieldset-step.active").removeClass("active"),$(".fieldset-step.step-"+step).addClass("active"),$("#main-content, .donation-form-container").find(".step-header.step-"+previousStep).removeClass("active"),$("#main-content, .donation-form-container").find(".step-header.step-"+step).addClass("active");var formStep=step+1;$(".donation-steps .step").removeClass("active"),$(".donation-steps .step-"+step).addClass("active");var stepHeader=$(".step-header.step-"+formStep).html();$(".donation-steps .breadcrumb-nav").attr("aria-label",stepHeader+", step "+formStep+" of 4"),$("body").removeClass("step-"+previousStep+"-active"),$("body").addClass("step-"+step+"-active"),currentStep=step}function validateStep(step){var stepSelector=".fieldset-step.step-0";if(0==step){if($("#webform-component-donation--recurs-monthly").length){stepSelector=$('#edit-submitted-donation-recurs-monthly input[type="radio"][value="NO_RECURR"]').is(":checked")?"#webform-component-donation--amount":"#webform-component-donation--recurring-amount";var otherField=$('#edit-submitted-donation-recurs-monthly input[type="radio"][value="NO_RECURR"]').is(":checked")?"#webform-component-donation--other-amount input":"#webform-component-donation--recurring-other-amount input"}else stepSelector="#webform-component-donation--amount",otherField="#webform-component-donation--other-amount input";var value=$(stepSelector+' input[type="radio"]:checked').val();if(void 0===value||value.length<=0)return setStepError(stepSelector,'<ul><li><a href="'+stepSelector+'" aria-label="A donation amount is required "><span>Amount:</span> Please enter a donation amount.</a></li></ul>'),$(".step-errors .messages.error").focus(),!1;if("other"==value){var otherVal=$(stepSelector+" "+otherField).val();if(void 0===otherVal||otherVal.length<=0)return setStepError(stepSelector,'<ul><li><a href="'+stepSelector+'" aria-label="A donation amount is required "><span>Amount:</span> Please enter a donation amount.</a></li></ul>'),$(".step-errors .messages.error").focus(),!1;if(otherVal<5)return setStepError(stepSelector,'<ul><li><a href="'+stepSelector+'" aria-label="The minimum donation  amount is $5.00"><span>Other Amount:</span> Please enter a donation amount greater than $5.00</a></li></ul>'),$(".step-errors .messages.error").focus(),!1;if(!$.isNumeric(otherVal))return setStepError(stepSelector,'<ul><li><a href="'+stepSelector+'" aria-label="Please enter a valid numerical donation amount."><span>Other Amount:</span> Please enter a valid numerical amount</a></li></ul>'),$(".step-errors .messages.error").focus(),!1}}else if(1==step)stepSelector=".fieldset-step.step-1";else if(2==step)stepSelector=".fieldset-step.step-2";else if(3==step){var errors,paymentMethod=$((stepSelector=".fieldset-step.step-3")+' .fundraiser-payment-methods input[type="radio"]:checked').val();if(void 0===paymentMethod&&void 0===(paymentMethod=$(stepSelector).find('input[name*="payment_method"]:checked').val())&&(paymentMethod=$(stepSelector).find('input[name*="payment_method"]').val()),"credit"==paymentMethod)if($(stepSelector).find(".form-item-submitted-payment-information-payment-fields-credit-card-number input").blur(),$(stepSelector).find(".form-item-submitted-payment-information-payment-fields-credit-card-cvv input").blur(),(errors=checkForErrors($(stepSelector))).length>0)return setStepError(stepSelector,errors),!1;if("bank account"==paymentMethod)if($(stepSelector).find(".account-routingNum input").blur(),$(stepSelector).find(".account-accNum input").blur(),$(stepSelector).find(".account-accType input").blur(),(errors=checkForErrors($(stepSelector))).length>0)return setStepError(stepSelector,errors),!1}if(3!=step&&(errors=checkForErrors($(stepSelector))).length>0)return setStepError(stepSelector,errors),!1;return $(stepSelector+" .step-errors").remove(),!0}function inputEnabled(elementID){return null==document.getElementById(elementID).getAttribute("disabled")}function checkForErrors(sel){var hasError=!1,errors="";return hiddenConditionals=sel.find(".form-item").filter(".conditional:hidden"),sel.find(".form-item").not(hiddenConditionals).each((function(){var formItemEle=$(this);if(formItemEle.find("label.error")[0]){if(!formItemEle.find("label.error.valid")[0]){if(formItemEle.addClass("error"),formItemEle.find("label.error").attr('aria-live="polite"'),formItemEle.find("label.error").siblings("select")[0]||!formItemEle.find(".text-input-label").length)var inputLabel=formItemEle.find("label:first").text().replace(/[.*]+/g," ").trim();else inputLabel=formItemEle.find(".text-input-label").text().replace(/[.*]+/g," ").trim();formItemEle.hasClass("error")&&formItemEle.is("div")?elemID=formItemEle.find("input:first").attr("id"):formItemEle.is("input")?elemID=formItemEle.attr("id"):elemID=formItemEle.find(".webform-component-fieldset.active input:first").attr("id"),inputEnabled(elemID)&&(hasError=!0,errors+='<li><a href="#'+elemID+'"><span>'+inputLabel+"</span>: "+formItemEle.find("label.error").text().replace(/[.*]+/g," ").trim()+"</a></li>")}}else if(formItemEle.find("input.required")[0]||formItemEle.find("select.required")){if(formItemEle.find('input.required[name*="other_amount"]')[0])return;if(formItemEle.find("label.error").siblings("select")[0]||!formItemEle.find(".text-input-label").length)inputLabel=formItemEle.find("label:first").text().replace(/[.*]+/g," ").trim();else inputLabel=formItemEle.find(".text-input-label").text().replace(/[.*]+/g," ").trim();if(formItemEle.find("input.required.form-text")[0]&&inputEnabled(formItemEle.find("input.required.form-text").attr("id")))formItemEle.find("input.required.form-text").val().length||(hasError=!0,formItemEle.addClass("error"),errors+='<li><a href="#'+formItemEle.attr("id")+'"><span>'+inputLabel+"</span>: This field is required.</a></li>");else if(formItemEle.find("select.required")[0]){!formItemEle.find("select.required option:selected").val().length>0&&(hasError=!0,formItemEle.addClass("error"),errors+='<li><a href="#'+formItemEle.attr("id")+'"><span>'+inputLabel+"</span>: Please select a value.</a></li>")}}})),1==hasError?"<ul>"+(errors=errors.replace('<span aria-label="Other Minimum payment $5.00">Other Minimum payment $5.00</span>: ',""))+"</ul>":""}function setStepError(stepSelector,errors){var messagePlacement="";messagePlacement=stepSelector.indexOf("amount")>-1?".fieldset-step.step-0":stepSelector,$(messagePlacement).find(" .step-errors").length>0||$(messagePlacement).find(".fieldset-wrapper").eq(0).prepend('<div class="mobile-message-wrapper"><div class="step-errors messages error"></div></div>'),$(messagePlacement).find(".step-errors").html(errors),$(messagePlacement).find(".step-errors").prepend('<div class="error-intro">Please check the following fields</div>'),$(stepSelector).find(".form-item.control-group.error:first input").focus()}function addReminderMessage(type){var reminderMessage="[type] donation".replace("[type]",type);if($(".fieldset-step.step-1 .reminder-display").length>0)$(".fieldset-step.step-1").find(".reminder-display").html(reminderMessage),$(".fieldset-step.step-2").find(".reminder-display").html(reminderMessage),$(".fieldset-step.step-3").find(".reminder-display").html(reminderMessage);else{var reminderMessageHTML='<div class="reminder-display">'+reminderMessage+"</div>";$(".fieldset-step.step-1 .stepContentWrapper").prepend(reminderMessageHTML),$(".fieldset-step.step-2 .stepContentWrapper").prepend(reminderMessageHTML),$(".fieldset-step.step-3 .stepContentWrapper").prepend(reminderMessageHTML)}}function webformKeyDown(e){if("Enter"==e.key||"Enter"==e.code)return e.preventDefault(),0==currentStep?$('#edit-submitted-extra-fields-payment-options input:not("#edit-submit"):first').trigger("click"):$(".webform-component-fieldset.active .progress-buttons .progress-wrap button:first").trigger("click"),!1}function setProgressClickEvents(){$("form.webform-client-form",context).once("set-progress-buttons-events",(function(){$(".progress-buttons .continue",context).click((function(e){return e.preventDefault(),goTo("+"),!1})).keydown((function(e){"Enter"!=e.key&&"Enter"!=e.code||(e.preventDefault(),$(this).trigger("click"))})),$(".progress-buttons .back",context).click((function(e){return e.preventDefault(),goTo("-"),!1})).keydown((function(e){"Enter"!=e.key&&"Enter"!=e.code||(e.preventDefault(),$(this).trigger("click"))})),$(".progress-buttons .complete",context).click((function(e){e.preventDefault(),0!=validateStep(3)&&!0===$(".webform-client-form").valid()&&($paymentFieldsProgress=$paymentFields.find(".progress-buttons .progress-wrap"),$paymentFieldsProgress.find(".back").hide(),$paymentFieldsProgress.find(".complete").hide(),$paymentFieldsProgress.append('<div class="processing">Processing</div>'),$(".webform-client-form .form-actions input").click())})).keydown((function(e){"Enter"!=e.key&&"Enter"!=e.code||(e.preventDefault(),$(this).trigger("click"))}))}))}$("form.webform-client-form",context).once("wrap-step-fieldsets",(function(){$donationFields.addClass("fieldset-step"),$paymentFields.addClass("fieldset-step"),$contactFields.addClass("fieldset-step"),$billingFields.addClass("fieldset-step")})),$("span.trim-zero-cents",context).each((function(index,value){var trimmedValue=$(value).html().replace(/\.00$/,"");$(value).html(trimmedValue)})),updateButtonText(getDonationAmount(),getDonationType()),$("#edit-submitted-payment-information-payment-fields-bank-account").once("make-bank-fields-required",(function(){$("input#edit-submitted-payment-information-payment-fields-bank-account-accnum").addClass("required"),$("input#edit-submitted-payment-information-payment-fields-bank-account-routingnum").addClass("required")})),$(document).ready((function(){$("form.webform-client-form",context).once("set-webform-click-events",(function(){$('#edit-submitted-extra-fields-payment-options input[value="0"]',context).click((function(e){return e.preventDefault(),goTo("+"),!1})),$('#edit-submitted-extra-fields-payment-options input[value="3"]',context).click((function(e){return e.preventDefault(),goTo("+"),!1})),$('form.webform-client-form input:not(":button"), .webform-client-form select',context).not('[name="submitted[billing_information][state]"]').keydown(webformKeyDown)}));var stateFieldId=$('[name="submitted[billing_information][state]"]').attr("id");$('[name="submitted[billing_information][state]"]').once("setup-dynamic-state-field-event-"+stateFieldId,(function(){$('[name="submitted[billing_information][state]"]').keydown(webformKeyDown)}))})),$(window).load((function(){$(".multistep-donation .webform-client-form, .multistep-donation .donation-steps").css({visibility:"visible"}),$('input[type="radio"][name="submitted[donation][recurs_monthly]"]',context).once("setup-choose-payment-text-toggle",(function(){$(this).change(Drupal.acluDonationFormToggleChooseMethodText)}));var queryStrings=Drupal.behaviors.FormJS.getQueryParams(document.location.search),optin=(queryStrings.init_step,queryStrings.optin),callMsgType=queryStrings.call_msg,apiMsgType=queryStrings.api_msg;void 0!==optin&&-1==optin&&$("#webform-component-donation--email-opt-in").hide(),$(".advocacy-donation-form").length&&(void 0!==callMsgType?$(".petition-confirmation-message").html("You will receive a call now. Your action is making a big difference in our fight."):void 0!==apiMsgType&&$(".petition-confirmation-message").html("We just sent you an email confirming that you have signed up to receive email from the American Civil Liberties Union (ACLU).")),$(".confirmation .sb_social_button_facebook").parent().prependTo($(".sb_social_toolbox")).addClass("moved-in-js"),$(".advocacy-donation-form.multistep-donation  #advocacy-social-share-block .sb_social_button_facebook").prependTo($(".sb_social_toolbox")).addClass("moved-in-js"),$(".confirmation.advocacy-donation-form .donation-landing-section.row1").addClass("has-background-yellow mt-xl"),$("body").addClass("step-0-active"),$('input[type="radio"][name="submitted[donation][amount]"][value="other"]',context).parent().addClass("other-button-wrapper"),$('input[type="radio"][name="submitted[donation][recurring_amount]"][value="other"]',context).parent().addClass("other-button-wrapper"),$("form.webform-client-form",context).once("rearrange-cc-expiration",(function(){$(".form-item-submitted-payment-information-payment-fields-credit-expiration-date-card-expiration-month").prepend($(".form-item-submitted-payment-information-payment-fields-credit-expiration-date-card-expiration-month > .auto-size > .auto-size:first-child")),$(".form-item-submitted-payment-information-payment-fields-credit-expiration-date-card-expiration-month").prepend($(".form-item-submitted-payment-information-payment-fields-credit-expiration-date-card-expiration-month .auto-size:first-child label"))})),$('input[name*="other_amount"]').attr("placeholder","0.00");var targetNodeOther=document.getElementById("webform-component-donation--other-amount"),targetNodeRecurring=document.getElementById("webform-component-donation--recurring-other-amount"),config={attributes:!0},observer=new MutationObserver((function(mutationRecords,observer){mutationRecords.forEach((function(mutation){if("attributes"==mutation.type&&"class"===mutation.attributeName){var parentDiv="#webform-component-donation--other-amount";if(mutation.target.className.indexOf("recurring-other-amount-wrapper")>-1&&(parentDiv="#webform-component-donation--recurring-other-amount"),$(parentDiv+" .currency-in-input label.error").length&&!$(parentDiv+" .currency-in-input label.error").hasClass("valid")){var curText=$.trim($(parentDiv+" .currency-in-input label.error").text());curText&&curText.lastIndexOf(".")>=0&&(curText=curText.slice(0,-1),$(parentDiv+" .currency-in-input label.error").text(curText))}}}))}));targetNodeOther&&observer.observe(targetNodeOther,config),targetNodeRecurring&&observer.observe(targetNodeRecurring,config),$("#webform-component-donation--recurs-monthly",context).once("set-recurring-message-multistep",(function(){if($("#webform-component-donation--recurs-monthly").length&&!$("#recurring-message-multistep-suppress").length){var monthlyUpsellText="A monthly gift helps us respond to urgent threats and plan ahead.";$("#recurring-message-multistep-replace").length&&(monthlyUpsellText=$("#recurring-message-multistep-replace").html(),$("#recurring-message-multistep-replace").hide()),$("#webform-component-donation--recurs-monthly #edit-submitted-donation-recurs-monthly-2 + label").append('<div id="recurring-message-multistep">'+monthlyUpsellText+"</div>")}})),$("form.webform-client-form",context).once("step-progress-buttons",(function(){$(this).attr("name","webform-donation"),isDonationLandingForm()&&$(".donation-steps").insertBefore($(".fieldset-step.step-0")),$(".fieldset-step",context).each((function(progressStep){step=progressStep,0==step?($("#webform-component-extra-fields--payment-options, #webform-component-extra-fields--payment-message").wrapAll('<div class="progress-buttons"><div class="progress-wrap"></div></div>'),Drupal.acluDonationFormToggleChooseMethodText(),$(this).addClass("active"),activeInd="active"):1==step||2==step?($(this).append('<div class="progress-buttons"><div class="progress-wrap"><button type="button" name="button[progress][next]" class="continue">Next</button><button type="button" form="webform-donation" name="button[progress][previous]" class="back">Previous</button></div></div>'),activeInd=""):($(this).append('<div class="progress-buttons"><div class="progress-wrap"><button type="submit" name="button[progress][donate]" class="complete">Donate</button><button type="button" name="button[progress][previous]" class="back">Previous</button></div></div>'),activeInd="");var stepClass="step-"+step,formStep=step+1;$(this).addClass(stepClass);var curLegend=$(this).find("legend"),legendTextWrapper=$(this).find("legend span.fieldset-legend"),ariaLabel="Step "+formStep+" of 4:"+legendTextWrapper.text(),headerLabel=legendTextWrapper.text()+"heading",stepNavigationElement=$('<legend class="step-header '+stepClass+" "+activeInd+'" aria-label="'+ariaLabel+'" id="'+headerLabel+'" tabindex="-1"><span form-progress="'+formStep+'" aria-hidden="true">'+legendTextWrapper.text()+"</span></legend>");isDonationLandingForm()?stepNavigationElement.prependTo($(this)):stepNavigationElement.insertBefore(curLegend.parent()),curLegend.remove(),$((stepClass="."+stepClass)+" .fieldset-wrapper, "+stepClass+" .form-wrapper, "+stepClass+" .progress-buttons").wrapAll('<div class="stepContentWrapper"></div>')})),setProgressClickEvents(),$("#edit-actions").insertBefore($(".pay-with-cc")),$(".step-1 .progress-buttons .back").click((function(){$(".applepay-available").length&&$("input[name='submitted[payment_information][payment_method]']").filter((function(){return"applepay"==this.value})).trigger("click")}))}));var expirationMonthID="edit-submitted-payment-information-payment-fields-credit-expiration-date-card-expiration-month";$("<label for='edit-submitted-payment-information-payment-fields-credit-expiration-date-card-expiration-month'>Expiration month</label>").insertBefore("#"+expirationMonthID);var expirationYearID="edit-submitted-payment-information-payment-fields-credit-expiration-date-card-expiration-year";$("<label for='edit-submitted-payment-information-payment-fields-credit-expiration-date-card-expiration-year'>Expiration year</label>").insertBefore("#"+expirationYearID),$(".webform-client-form").find(".pay-with-cc").click((function(e){var ccRadio=$(".webform-client-form").find("input[name='submitted[payment_information][payment_method]']").filter((function(){return"credit"==this.value}));jQuery(ccRadio).click(),$(".webform-client-form .pay-with-bank").length>0&&Drupal.behaviors.DonationMultistepHidePaymentFields("bank")})),$(".webform-client-form").find(".pay-with-bank").click((function(e){var baRadio=$(".webform-client-form").find("input[name='submitted[payment_information][payment_method]']").filter((function(){return"bank account"==this.value}));jQuery(baRadio).click(),$(".webform-client-form .pay-with-cc").length>0&&Drupal.behaviors.DonationMultistepHidePaymentFields("credit")})),$(".webform-client-form").find("input[name='submitted[payment_information][payment_method]']").filter((function(){return"paypal"==this.value})).click((function(e){0!=validateStep(0)&&Drupal.behaviors.DonationFormJS.acluSubmitPaypal(e)})),$(".webform-client-form").find(".pay-with-paypal").click((function(e){var paypalRadio=$(".webform-client-form").find("input[name='submitted[payment_information][payment_method]']").filter((function(){return"paypal"==this.value}));jQuery(paypalRadio).click()})),$(".applepay-available #edit-submit").click((function(e){if($("body.step-0-active").length>0)return 0==validateStep(0)?(e.preventDefault(),!1):($(".step-errors").remove(),!0)})),$("form.webform-client-form",context).once("skip-to-payment-information",(function(){function getPaymentInfoTypeError(errorMessage){for(type in paymentInfoErrorMessageTypes)for(var i=0;i<paymentInfoErrorMessageTypes[type].messages.length;i++)if(paymentInfoErrorMessageTypes[type].messages[i].toLowerCase()===errorMessage.toLowerCase())return paymentInfoErrorMessageTypes[type];return!1}var skipToPaymentStep=!1,errorType="CC",paymentInfoErrorMessageTypes={creditCardNumberErrors:{field:"Credit card number",errorType:"CC",domSelector:"#edit-submitted-payment-information-payment-fields-credit-card-number",messages:["You have entered an invalid credit card number.","We received an error processing your card. Please enter your information again or try a different card.","The credit card number is required."]},cVVNumberErrors:{field:"CVV",errorType:"CC",domSelector:"#edit-submitted-payment-information-payment-fields-credit-card-cvv",messages:["You have entered an invalid CVV number.","The credit card CVV is required."]},expirationDateErrors:{field:"Expiration date",errorType:"CC",domSelector:"#edit-submitted-payment-information-payment-fields-credit-expiration-date-card-expiration-month",messages:["The credit card you entered has expired."]},accountNumberErrors:{field:"Account number",errorType:"EFT",domSelector:"#edit-submitted-payment-information-payment-fields-bank-account-accnum",messages:["You have entered an invalid account number."]},routingNumberErrors:{field:"Routing number",errorType:"EFT",domSelector:"#edit-submitted-payment-information-payment-fields-bank-account-routingnum",messages:["The routing number should be a 9 digit numeric value."]}},errorMessageListHTML="";if($(".message-wrapper .alert.error ul li").length)$(".message-wrapper .alert.error ul li").each((function(index,errorListItem){if("the litle credit card payment method is configured to use the pre-live environment and will not process live transactions."===errorListItem.textContent.toLowerCase())return!0;var paymentInfoTypeError=getPaymentInfoTypeError(errorListItem.textContent);if(!paymentInfoTypeError)return skipToPaymentStep=!1,!1;skipToPaymentStep=!0,errorType=paymentInfoTypeError.errorType,errorMessageListHTML+='<li><a href="'+paymentInfoTypeError.domSelector+'"><strong>'+paymentInfoTypeError.field+":</strong> "+errorListItem.textContent+"</a></li>"}));else if($(".message-wrapper .alert.error").length){var errorMessageWrapper=document.querySelector(".message-wrapper .alert.error");if(errorMessageWrapper.childNodes[4]&&errorMessageWrapper.childNodes[4].nodeValue){var paymentTypeError=getPaymentInfoTypeError(errorMessageWrapper.childNodes[4].nodeValue.trim());paymentTypeError&&(skipToPaymentStep=!0,errorType=paymentTypeError.errorType,errorMessageListHTML+='<li><a href="'+paymentTypeError.domSelector+'"><strong>'+paymentTypeError.field+":</strong> "+errorMessageWrapper.childNodes[4].nodeValue.trim()+"</a></li>")}}if(skipToPaymentStep){const formItemClass="CC"===errorType?".pay-with-cc":".pay-with-bank";$(".webform-client-form").find(formItemClass).click(),updateStepDisplay(currentStep,3);var type=getDonationType();addReminderMessage(type),updateButtonText(getDonationAmount(),type),$(".message-wrapper .alert.error").remove(),setStepError(".fieldset-step.step-"+currentStep,"<ul>"+errorMessageListHTML+"</li>")}else $("input[name='submitted[payment_information][payment_method]']").filter((function(){return"applepay"==this.value})).trigger("click")})),Drupal.behaviors.DonationFormValidateSkipStep&&Drupal.behaviors.DonationFormValidateSkipStep.attach()&&goTo("+"),$("#advocacy-social-share-block").once("move-advocacy-donation-form",(function(){var mediaQuery=window.matchMedia("(min-width: 1000px)");toggleFormPosition(mediaQuery),mediaQuery.addListener(toggleFormPosition)}))})),$(".captcha.form-wrapper",context).once("move-captcha",(function(){$("body").addClass("captcha-page"),$("legend",this).remove();var newCaptchaHTML=$('<div class="captcha form-wrapper"></div>');$('<div class="reminder-display">CAPTCHA</div>').appendTo(newCaptchaHTML),$(".fieldset-description",this).appendTo(newCaptchaHTML),$('input[type="hidden"]',this).appendTo(newCaptchaHTML),$("img",this).appendTo(newCaptchaHTML),$(".form-item-captcha-response",this).appendTo(newCaptchaHTML),newCaptchaHTML.insertAfter($("#webform-component-donation--email-opt-in")),$(this).remove()})),Drupal.behaviors.DonationMultistepHidePaymentFields=function(disablePaymentType,settings={}){var bankPaymentFields=$("input[id='edit-submitted-payment-information-payment-fields-bank-account-accnum'], input[id='edit-submitted-payment-information-payment-fields-bank-account-routingnum']"),bankPaymentLabelsReq=$("label[for='edit-submitted-payment-information-payment-fields-bank-account-accnum'], label[for='edit-submitted-payment-information-payment-fields-bank-account-routingnum'], label[for='edit-submitted-payment-information-payment-fields-bank-account-acctype']").not(":contains('*')"),creditCardPaymentFields=$("input[id='edit-submitted-payment-information-payment-fields-credit-card-number'], input[id='edit-submitted-payment-information-payment-fields-credit-card-cvv']"),creditCardPaymentLabelsReq=$("label[for='edit-submitted-payment-information-payment-fields-credit-card-number'], label[for='edit-submitted-payment-information-payment-fields-credit-expiration-date-card-expiration-month'], label[for='edit-submitted-payment-information-payment-fields-credit-card-cvv']").not(":contains('*')");"bank"==disablePaymentType?($(".form-item-submitted-payment-information-payment-fields-bank").closest(".fieldset-wrapper").hide(),$(".form-item-submitted-payment-information-payment-fields-credit-card-number").closest(".fieldset-wrapper").show(),$("#webform-component-payment-information legend span").html("Credit card"),bankPaymentFields.attr("disabled",!0).val(),creditCardPaymentFields.attr("disabled",!1),creditCardPaymentLabelsReq.append('<span class="form-required">*</span>')):($(".form-item-submitted-payment-information-payment-fields-credit-card-number").closest(".fieldset-wrapper").hide(),$(".form-item-submitted-payment-information-payment-fields-bank").closest(".fieldset-wrapper").show(),$("#webform-component-payment-information legend span").html("Bank account"),bankPaymentFields.attr("disabled",!1),bankPaymentLabelsReq.append('<span class="form-required">*</span>'),creditCardPaymentFields.attr("disabled",!0).val())}}}}(jQuery),function($){Drupal.behaviors.SaveCreditCard={attach(context,settings){var wrapper=$(".form-type-checkbox.form-item-submitted-payment-information-payment-fields-credit-ocd",context);wrapper.length>0&&wrapper.once("save-credit-card",(function(){var tooltip=wrapper.find("div.description"),tooltipOpen=!1,infoIcon=$("<button type='button' class='info-icon'>i</button>").appendTo(wrapper);var closeButton=$('<button type="button" class="close-button"><svg width="14" height="13" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.62132 8.34924L11 12.7279L13.1213 10.6066L8.74264 6.22792L12.7279 2.24264L10.6066 0.121321L6.62132 4.1066L2.51472 0L0.393403 2.12132L4.5 6.22792L0 10.7279L2.12132 12.8492L6.62132 8.34924Z" fill="white"/></svg></button>').appendTo(tooltip);function closeTooltip(){tooltipOpen=!1,tooltip.removeClass("open"),$("#container").off("click")}infoIcon.click((function(e){tooltipOpen?closeTooltip():function(e){e.stopPropagation(),tooltipOpen=!0,tooltip.addClass("open"),$("#container").on("click",closeTooltip)}(e)})),closeButton.click(closeTooltip),tooltip.click((function(e){e.stopPropagation()}))}))}}}(jQuery),function($){Drupal.behaviors.DonationFormSkipStep={attach:function(context,settings){if(window.addEventListener("message",(function(event){var data;"triggerPaypal"===event.data.event_id&&event.data&&(data=event.data.data)&&($("#edit-submitted-donation-recurs-monthly-1").click(),data.isOtherAmount?($("#edit-submitted-donation-amount input[value='other']").click(),$("#edit-submitted-donation-other-amount").val(data.amount)):$("#edit-submitted-donation-amount input[type='radio']").each((function(){$(this).val()===data.amount&&$(this).click()})),$("#edit-submitted-extra-fields-payment-options-2").click())})),Drupal.behaviors.DonationFormValidateSkipStep.attach()){var queryStrings=Drupal.behaviors.FormJS.getQueryParams(document.location.search),{amount:amount,other_amount:other_amount,recurs_monthly:recurs_monthly,recurring_amount:recurring_amount,recurring_other_amount:recurring_other_amount,email_opt_in:email_opt_in,payment_method:payment_method}=queryStrings,isMultistep=$(".multistep-donation").length,emailCheckbox=$('[name="submitted[donation][emailOptIn][1]"]');0===emailCheckbox.length&&(emailCheckbox=$('[name="submitted[donation][email_opt_in][1]"]')),emailCheckbox.length>0&&(1==email_opt_in?emailCheckbox.prop("checked",!0):0==email_opt_in&&emailCheckbox.prop("checked",!1));var switcher=$("input[type='radio'][name='submitted[donation][recurs_monthly]']"),showOtherField=isMultistep?"block":"inline-flex";$('#webform-component-donation #edit-submitted-donation-recurs-monthly input[value="'+recurs_monthly+'"]').length>0&&$('#webform-component-donation #edit-submitted-donation-recurs-monthly input[value="'+recurs_monthly+'"]').attr("checked",!0),"recurs"==recurs_monthly?function(v){var oneTime=$("#webform-component-donation--amount",v),recurs=$("#webform-component-donation--recurring-amount",v),switcher=$("input[type='radio'][name='submitted[donation][recurs_monthly]']",v);oneTime.length>0&&recurs.length>0&&switcher.length>0&&($("input:radio[name='submitted[donation][recurring_amount]']:checked",v).attr("checked",!1),$("input:radio[name='submitted[donation][amount]']:checked",v).attr("checked",!1),$(".singlestep-donation #webform-component-donation").width()>767?$("#webform-component-donation--recurring-other-amount").css("display","inline-flex"):$("#webform-component-donation--recurring-other-amount").css("display","none"),$("#webform-component-donation input#edit-submitted-donation-other-amount").val(""),$(".progress-wrap").addClass("progress-wrap--monthly"),recurs.show(),oneTime.hide())}(context):function(v){var oneTime=$("#webform-component-donation--amount",v),recurs=$("#webform-component-donation--recurring-amount",v),switcher=$("input[type='radio'][name='submitted[donation][recurs_monthly]']",v);oneTime.length>0&&recurs.length>0&&switcher.length>0&&($("input:radio[name='submitted[donation][recurring_amount]']:checked",v).attr("checked",!1),$("input:radio[name='submitted[donation][amount]']:checked",v).attr("checked",!1),$(".singlestep-donation #webform-component-donation").width()>767?$("#webform-component-donation--other-amount").css("display","inline-flex"):$("#webform-component-donation--other-amount").css("display","none"),$("#webform-component-donation input#edit-submitted-donation-recurring-other-amount").val(""),$("#webform-component-donation input#edit-submitted-donation-other-amount").val(""),$(".progress-wrap").removeClass("progress-wrap--monthly"),recurs.hide(),oneTime.show())}(context),"recurs"==recurs_monthly&&switcher.length>0?($('#webform-component-donation #edit-submitted-donation-recurring-amount input[value="'+recurring_amount+'"]').length>0&&($('#webform-component-donation #edit-submitted-donation-recurring-amount input[value="'+recurring_amount+'"]').attr("checked",!0),$(".singlestep-donation #webform-component-donation").width()>767?$("#webform-component-donation--recurring-other-amount").css("display","inline-flex"):$("#webform-component-donation--recurring-other-amount").css("display","none")),void 0!==recurring_other_amount&&""!=recurring_other_amount&&null!=recurring_other_amount&&($('#webform-component-donation #edit-submitted-donation-recurring-amount input[value="other"]').attr("checked",!0),$("#webform-component-donation--recurring-other-amount").css("display",showOtherField),$("#webform-component-donation input#edit-submitted-donation-recurring-other-amount").focus().val(recurring_other_amount).blur())):($('#webform-component-donation #edit-submitted-donation-amount input[value="'+amount+'"]').length>0&&($('#webform-component-donation #edit-submitted-donation-amount input[value="'+amount+'"]').attr("checked",!0),$(".singlestep-donation #webform-component-donation").width()>767?$("#webform-component-donation--other-amount").css("display","inline-flex"):$("#webform-component-donation--other-amount").css("display","none")),void 0!==other_amount&&""!=other_amount&&null!=other_amount&&($('#webform-component-donation #edit-submitted-donation-amount input[value="other"]').attr("checked",!0),$("#webform-component-donation--other-amount").css("display",showOtherField),$("#webform-component-donation input#edit-submitted-donation-other-amount").focus().val(other_amount).blur()));var donationFormStartPos=$("#webform-component-donation").offset();$(jQuery.browser.webkit?"body":"html").animate({scrollTop:parseInt(donationFormStartPos.top,10)}),"recurs"==recurs_monthly&&("eft"===payment_method?Drupal.behaviors.DonationMultistepHidePaymentFields("credit_card"):"credit_card"===payment_method&&Drupal.behaviors.DonationMultistepHidePaymentFields("bank"))}}},Drupal.behaviors.DonationFormValidateSkipStep={attach:function(context,settings){var methods,queryStrings=Drupal.behaviors.FormJS.getQueryParams(document.location.search),{init_step:init_step,amount:amount,other_amount:other_amount,recurs_monthly:recurs_monthly,recurring_amount:recurring_amount,recurring_other_amount:recurring_other_amount,payment_method:payment_method}=queryStrings,recurrenceIsSet=void 0!==recurs_monthly,amountIsSet=void 0!==amount||void 0!==other_amount||void 0!==recurring_amount||void 0!==recurring_other_amount,paymentMethodIsSet="eft"===payment_method||"credit_card"===payment_method;if(!paymentMethodIsSet){var{creditCardAvailable:creditCardAvailable,eftAvailable:eftAvailable}=(methods={creditCardAvailable:!1,eftAvailable:!1},$("#edit-submitted-extra-fields-payment-options .form-item label",context).each((function(i,el){switch($(el).html().trim()){case"Credit Card":methods.creditCardAvailable=!0;break;case"Bank Account":methods.eftAvailable=!0}})),methods);creditCardAvailable&&eftAvailable?paymentMethodIsSet=!1:eftAvailable?(Drupal.behaviors.DonationMultistepHidePaymentFields("credit_card"),paymentMethodIsSet=!0):(Drupal.behaviors.DonationMultistepHidePaymentFields("bank"),paymentMethodIsSet=!0)}return 1==init_step&&recurrenceIsSet&&amountIsSet&&paymentMethodIsSet}}}(jQuery),function($){Drupal.behaviors.AmountText={attach(context,settings){const redistrictingText={oneTime:["Fund this once-in-a-decade fight for fair maps with $10.","Make sure we have fair maps before the 2022 midterms; give $20.22 to keep our legal, advocacy and organizing teams going nationwide.","Support the tireless work all 54 of our local chapters are doing across the country to ensure districts are drawn fairly."],monthly:["Fund this once-in-a-decade fight for fair maps with $10/month.","Make sure we have fair maps before the 2022 midterms; give $20.22/month to keep our legal, advocacy and organizing teams going nationwide.","Support the tireless work all 54 of our local chapters are doing across the country to ensure districts are drawn fairly by giving $54/month."]},amountTextByNodeId={68865:redistrictingText,68871:redistrictingText,70606:redistrictingText,70609:redistrictingText,71362:{oneTime:["Help us defend civil liberties across all 50 states, Puerto Rico, and D.C.","Celebrate over 100 years of ACLU’s defense of civil liberties — and fuel the fight for the next century.","We have 288 full-time attorneys on staff fighting on behalf of thousands of plaintiffs and protecting civil liberties. Support their incredible work today."],monthly:["Fund our once-in-a-decade fight for fair maps.","Give $20.22 to keep our legal, advocacy and organizing teams going nationwide in preparation for the 2022 midterms.","We've won 66 major cases this year protecting voting rights, transgender rights, immigration rights, and more. Help us keep winning!"]},71350:{oneTime:["ACLU supporters are, on average, donating this amount this season."],monthly:["ACLU supporters are, on average, donating this amount this season."]},71577:{oneTime:["Fund our once-in-a-decade fight for fair maps.","Give $20.22 to keep our legal, advocacy and organizing teams going nationwide in preparation for the 2022 midterms.","We've won 66 major cases this year protecting voting rights, transgender rights, immigration rights, and more. Help us keep winning!"],monthly:[]}};function buildTextMarkup(texts){const markup=$("<div class='donation-amount-text-wrapper'>"),markupInner=texts.map((function(text,num){return"<div class='donation-amount-text' data-order="+num+">"+text+"</div>"}));return markup.append(markupInner.join(""))}function activateText(texts,parentSelector,button){$(parentSelector).find(".donation-amount-text").removeClass("active"),$(parentSelector+" .form-type-radio.active").removeClass("active");const buttonFor=$(button).attr("for");let buttonNumber=null;buttonFor.length>0&&(buttonNumber=parseInt(buttonFor[buttonFor.length-1],10)),null!==buttonNumber&&texts[buttonNumber-1]&&($("#"+buttonFor).parent().addClass("active"),$(parentSelector).find(".donation-amount-text:nth-child("+buttonNumber+")").addClass("active"))}const nodeIds=Object.keys(amountTextByNodeId);for(let i=0;i<nodeIds.length;i++){const nodeId=nodeIds[i];if($("body.page-node-"+nodeId,context).length>0){$("form.fundraiser-donation-form").addClass("show-donation-amount-texts");const oneTimeMarkup=buildTextMarkup(amountTextByNodeId[nodeId].oneTime),monthlyMarkup=buildTextMarkup(amountTextByNodeId[nodeId].monthly);$("#webform-component-donation--amount").append(oneTimeMarkup),$("#webform-component-donation--recurring-amount").append(monthlyMarkup),$("#edit-submitted-donation-amount label.option").click((function(){activateText(amountTextByNodeId[nodeId].oneTime,"#webform-component-donation--amount",this)})),jQuery("#edit-submitted-donation-amount input:checked").parent().find("label.option").length&&activateText(amountTextByNodeId[nodeId].oneTime,"#webform-component-donation--amount",jQuery("#edit-submitted-donation-amount input:checked").parent().find("label.option")),$("#edit-submitted-donation-recurring-amount label.option").click((function(){activateText(amountTextByNodeId[nodeId].monthly,"#webform-component-donation--recurring-amount",this)})),jQuery("#edit-submitted-donation-recurring-amount input:checked").parent().find("label.option").length&&activateText(amountTextByNodeId[nodeId].monthly,"#webform-component-donation--recurring-amount",jQuery("#edit-submitted-donation-recurring-amount input:checked").parent().find("label.option"))}}}}}(jQuery),function(l){if("undefined"!=typeof window){var n=!0,o=10,i="",r=0,a="",t=null,u="",c=!1,s={resize:1,click:1},d=128,f=!0,m=1,h="bodyOffset",g=h,p=!0,v="",y={},b=32,e=null,w=!1,T="[iFrameSizer]",E=T.length,O="",S={max:1,min:1,bodyScroll:1,documentElementScroll:1},M="child",I=!0,N=window.parent,A="*",C=0,k=!1,z=null,R=16,x=1,L="scroll",F=L,P=window,D=function(){ue("onMessage function not defined")},j=function(){},q=function(){},H={height:function(){return ue("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return ue("Custom width calculation function not defined"),document.body.scrollWidth}},W={},B=!1;try{var U=Object.create({},{passive:{get:function(){B=!0}}});window.addEventListener("test",te,U),window.removeEventListener("test",te,U)}catch(e){}var J,V,K,Q,X,Y,G,Z=Date.now||function(){return(new Date).getTime()},$={bodyOffset:function(){return document.body.offsetHeight+be("marginTop")+be("marginBottom")},offset:function(){return $.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return H.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,Te($))},min:function(){return Math.min.apply(null,Te($))},grow:function(){return $.max()},lowestElement:function(){return Math.max($.bodyOffset()||$.documentElementOffset(),we("bottom",Oe()))},taggedElement:function(){return Ee("bottom","data-iframe-height")}},_={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return H.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(_.bodyScroll(),_.documentElementScroll())},max:function(){return Math.max.apply(null,Te(_))},min:function(){return Math.min.apply(null,Te(_))},rightMostElement:function(){return we("right",Oe())},taggedElement:function(){return Ee("right","data-iframe-width")}},ee=(J=Se,X=null,Y=0,G=function(){Y=Z(),X=null,Q=J.apply(V,K),X||(V=K=null)},function(){var e=Z();Y||(Y=e);var t=R-(e-Y);return V=this,K=arguments,t<=0||R<t?(X&&(clearTimeout(X),X=null),Y=e,Q=J.apply(V,K),X||(V=K=null)):X||(X=setTimeout(G,t)),Q});ne(window,"message",ke),ne(window,"readystatechange",ze),ze()}function te(){}function ne(e,t,n,o){e.addEventListener(t,n,!!B&&(o||{}))}function oe(e,t,n){e.removeEventListener(t,n,!1)}function ie(e){return e.charAt(0).toUpperCase()+e.slice(1)}function re(e){return T+"["+O+"] "+e}function ae(e){w&&"object"==typeof window.console&&console.log(re(e))}function ue(e){"object"==typeof window.console&&console.warn(re(e))}function ce(){var e;!function(){function e(e){return"true"===e}var t=v.substr(E).split(":");O=t[0],r=l!==t[1]?Number(t[1]):r,c=l!==t[2]?e(t[2]):c,w=l!==t[3]?e(t[3]):w,b=l!==t[4]?Number(t[4]):b,n=l!==t[6]?e(t[6]):n,a=t[7],g=l!==t[8]?t[8]:g,i=t[9],u=t[10],C=l!==t[11]?Number(t[11]):C,y.enable=l!==t[12]&&e(t[12]),M=l!==t[13]?t[13]:M,F=l!==t[14]?t[14]:F}(),ae("Initialising iFrame ("+location.href+")"),function(){function e(e,t){return"function"==typeof e&&(ae("Setup custom "+t+"CalcMethod"),H[t]=e,e="custom"),e}var t;"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(t=window.iFrameResizer,ae("Reading data from page: "+JSON.stringify(t)),Object.keys(t).forEach(se,t),D="onMessage"in t?t.onMessage:D,j="onReady"in t?t.onReady:j,A="targetOrigin"in t?t.targetOrigin:A,g="heightCalculationMethod"in t?t.heightCalculationMethod:g,F="widthCalculationMethod"in t?t.widthCalculationMethod:F,g=e(g,"height"),F=e(F,"width")),ae("TargetOrigin for parent set to: "+A)}(),l===a&&(a=r+"px"),de("margin",function(e,t){return-1!==t.indexOf("-")&&(ue("Negative CSS value ignored for margin"),t=""),t}(0,a)),de("background",i),de("padding",u),(e=document.createElement("div")).style.clear="both",e.style.display="block",e.style.height="0",document.body.appendChild(e),he(),ge(),document.documentElement.style.height="",document.body.style.height="",ae('HTML & body height set to "auto"'),ae("Enable public methods"),P.parentIFrame={autoResize:function(e){return!0===e&&!1===n?(n=!0,pe()):!1===e&&!0===n&&(n=!1,ve()),n},close:function(){Ce(0,0,"close"),ae("Disable outgoing messages"),I=!1,ae("Remove event listener: Message"),oe(window,"message",ke),!0===n&&ve()},getId:function(){return O},getPageInfo:function(e){"function"==typeof e?(q=e,Ce(0,0,"pageInfo")):(q=function(){},Ce(0,0,"pageInfoStop"))},moveToAnchor:function(e){y.findTarget(e)},reset:function(){Ae("parentIFrame.reset")},scrollTo:function(e,t){Ce(t,e,"scrollTo")},scrollToOffset:function(e,t){Ce(t,e,"scrollToOffset")},sendMessage:function(e,t){Ce(0,0,"message",JSON.stringify(e),t)},setHeightCalculationMethod:function(e){g=e,he()},setWidthCalculationMethod:function(e){F=e,ge()},setTargetOrigin:function(e){ae("Set targetOrigin: "+e),A=e},size:function(e,t){Me("size","parentIFrame.size("+((e||"")+(t?","+t:""))+")",e,t)}},pe(),y=function(){function n(e){var t,n=e.split("#")[1]||e,o=decodeURIComponent(n),i=document.getElementById(o)||document.getElementsByName(o)[0];l!==i?(ae("Moving to in page link (#"+n+") at x: "+(t=function(e){var t=e.getBoundingClientRect(),n={x:window.pageXOffset!==l?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==l?window.pageYOffset:document.documentElement.scrollTop};return{x:parseInt(t.left,10)+parseInt(n.x,10),y:parseInt(t.top,10)+parseInt(n.y,10)}}(i)).x+" y: "+t.y),Ce(t.y,t.x,"scrollToOffset")):(ae("In page link (#"+n+") not found in iFrame, so sending to parent"),Ce(0,0,"inPageLink","#"+n))}function e(){""!==location.hash&&"#"!==location.hash&&n(location.href)}return y.enable?Array.prototype.forEach&&document.querySelectorAll?(ae("Setting up location.hash handlers"),Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),(function(e){"#"!==e.getAttribute("href")&&ne(e,"click",(function(e){e.preventDefault(),n(this.getAttribute("href"))}))})),ne(window,"hashchange",e),setTimeout(e,d)):ue("In page linking not fully supported in this browser! (See README.md for IE8 workaround)"):ae("In page linking not enabled"),{findTarget:n}}(),Me("init","Init message from host page"),j()}function se(e){var t=e.split("Callback");if(2===t.length){var n="on"+t[0].charAt(0).toUpperCase()+t[0].slice(1);this[n]=this[e],delete this[e],ue("Deprecated: '"+e+"' has been renamed '"+n+"'. The old method will be removed in the next major version.")}}function de(e,t){l!==t&&""!==t&&"null"!==t&&ae("Body "+e+' set to "'+(document.body.style[e]=t)+'"')}function le(n){var e={add:function(e){function t(){Me(n.eventName,n.eventType)}W[e]=t,ne(window,e,t,{passive:!0})},remove:function(e){var t=W[e];delete W[e],oe(window,e,t)}};n.eventNames&&Array.prototype.map?(n.eventName=n.eventNames[0],n.eventNames.map(e[n.method])):e[n.method](n.eventName),ae(ie(n.method)+" event listener: "+n.eventType)}function fe(e){le({method:e,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),le({method:e,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),le({method:e,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),le({method:e,eventType:"Input",eventName:"input"}),le({method:e,eventType:"Mouse Up",eventName:"mouseup"}),le({method:e,eventType:"Mouse Down",eventName:"mousedown"}),le({method:e,eventType:"Orientation Change",eventName:"orientationchange"}),le({method:e,eventType:"Print",eventName:["afterprint","beforeprint"]}),le({method:e,eventType:"Ready State Change",eventName:"readystatechange"}),le({method:e,eventType:"Touch Start",eventName:"touchstart"}),le({method:e,eventType:"Touch End",eventName:"touchend"}),le({method:e,eventType:"Touch Cancel",eventName:"touchcancel"}),le({method:e,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),le({method:e,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),le({method:e,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),"child"===M&&le({method:e,eventType:"IFrame Resized",eventName:"resize"})}function me(e,t,n,o){return t!==e&&(e in n||(ue(e+" is not a valid option for "+o+"CalculationMethod."),e=t),ae(o+' calculation method set to "'+e+'"')),e}function he(){g=me(g,h,$,"height")}function ge(){F=me(F,L,_,"width")}function pe(){var e;!0===n?(fe("add"),e=b<0,window.MutationObserver||window.WebKitMutationObserver?e?ye():t=function(){function t(e){function t(e){!1===e.complete&&(ae("Attach listeners to "+e.src),e.addEventListener("load",i,!1),e.addEventListener("error",r,!1),c.push(e))}"attributes"===e.type&&"src"===e.attributeName?t(e.target):"childList"===e.type&&Array.prototype.forEach.call(e.target.querySelectorAll("img"),t)}function o(e){var t;ae("Remove listeners from "+e.src),e.removeEventListener("load",i,!1),e.removeEventListener("error",r,!1),t=e,c.splice(c.indexOf(t),1)}function n(e,t,n){o(e.target),Me(t,n+": "+e.target.src,l,l)}function i(e){n(e,"imageLoad","Image loaded")}function r(e){n(e,"imageLoadFailed","Image load failed")}var a,u,c=[],s=window.MutationObserver||window.WebKitMutationObserver,d=(a=document.querySelector("body"),u={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},d=new s((function(e){Me("mutationObserver","mutationObserver: "+e[0].target+" "+e[0].type),e.forEach(t)})),ae("Create body MutationObserver"),d.observe(a,u),d);return{disconnect:function(){"disconnect"in d&&(ae("Disconnect body MutationObserver"),d.disconnect(),c.forEach(o))}}}():(ae("MutationObserver not supported in this browser!"),ye())):ae("Auto Resize disabled")}function ve(){fe("remove"),null!==t&&t.disconnect(),clearInterval(e)}function ye(){0!==b&&(ae("setInterval: "+b+"ms"),e=setInterval((function(){Me("interval","setInterval: "+b)}),Math.abs(b)))}function be(e,t){var n=0;return t=t||document.body,n=null!==(n=document.defaultView.getComputedStyle(t,null))?n[e]:0,parseInt(n,o)}function we(e,t){for(var n,o=t.length,i=0,r=0,a=ie(e),u=Z(),c=0;c<o;c++)r<(i=t[c].getBoundingClientRect()[e]+be("margin"+a,t[c]))&&(r=i);return u=Z()-u,ae("Parsed "+o+" HTML elements"),ae("Element position calculated in "+u+"ms"),R/2<(n=u)&&ae("Event throttle increased to "+(R=2*n)+"ms"),r}function Te(e){return[e.bodyOffset(),e.bodyScroll(),e.documentElementOffset(),e.documentElementScroll()]}function Ee(e,t){var n=document.querySelectorAll("["+t+"]");return 0===n.length&&(ue("No tagged elements ("+t+") found on page"),document.querySelectorAll("body *")),we(e,n)}function Oe(){return document.querySelectorAll("body *")}function Se(e,t,n,o){var i,r;!function(){function e(e,t){return!(Math.abs(e-t)<=C)}return i=l!==n?n:$[g](),r=l!==o?o:_[F](),e(m,i)||c&&e(x,r)}()&&"init"!==e?e in{init:1,interval:1,size:1}||!(g in S||c&&F in S)?e in{interval:1}||ae("No change in size detected"):Ae(t):(Ie(),Ce(m=i,x=r,e))}function Me(e,t,n,o){k&&e in s?ae("Trigger event cancelled: "+e):(e in{reset:1,resetPage:1,init:1}||ae("Trigger event: "+t),"init"===e?Se(e,t,n,o):ee(e,t,n,o))}function Ie(){k||(k=!0,ae("Trigger event lock on")),clearTimeout(z),z=setTimeout((function(){k=!1,ae("Trigger event lock off"),ae("--")}),d)}function Ne(e){m=$[g](),x=_[F](),Ce(m,x,e)}function Ae(e){var t=g;g=h,ae("Reset trigger event: "+e),Ie(),Ne("reset"),g=t}function Ce(e,t,n,o,i){var r;!0===I&&(l===i?i=A:ae("Message targetOrigin: "+i),ae("Sending message to host page ("+(r=O+":"+e+":"+t+":"+n+(l!==o?":"+o:""))+")"),N.postMessage(T+r,i))}function ke(t){var n={init:function(){v=t.data,N=t.source,ce(),f=!1,setTimeout((function(){p=!1}),d)},reset:function(){p?ae("Page reset ignored by init"):(ae("Page size reset by host page"),Ne("resetPage"))},resize:function(){Me("resizeParent","Parent window requested size check")},moveToAnchor:function(){y.findTarget(i())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var e=i();ae("PageInfoFromParent called from parent: "+e),q(JSON.parse(e)),ae(" --")},message:function(){var e=i();ae("onMessage called from parent: "+e),D(JSON.parse(e)),ae(" --")}};function o(){return t.data.split("]")[1].split(":")[0]}function i(){return t.data.substr(t.data.indexOf(":")+1)}function r(){return t.data.split(":")[2]in{true:1,false:1}}T===(""+t.data).substr(0,E)&&(!1===f?function(){var e=o();e in n?n[e]():("undefined"==typeof module||!module.exports)&&"iFrameResize"in window||"jQuery"in window&&"iFrameResize"in window.jQuery.prototype||r()||ue("Unexpected message ("+t.data+")")}():r()?n.init():ae('Ignored message of type "'+o()+'". Received before initialization.'))}function ze(){"loading"!==document.readyState&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}}(),window.onload=function(){jQuery("#skip-link").remove();var iframeWrapper=document.querySelector(".multistep-donation-landing--iframe");function optimizelyDonateClickEvent(){window.optimizely=window.optimizely||[],window.optimizely.push({type:"event",eventName:"giving-banner-donate-click",tags:{source:"iframe"}})}null!==iframeWrapper&&iframeWrapper.classList.contains("confirmation")&&(window.iFrameResizer={readyCallback:function(){window.parentIFrame.sendMessage("confirmation")}});for(var iframePaymentMethods=document.querySelectorAll("#edit-submitted-extra-fields-payment-options .form-type-radio label.option"),i=0;i<iframePaymentMethods.length;i++)iframePaymentMethods[i].addEventListener("click",optimizelyDonateClickEvent,!1)};

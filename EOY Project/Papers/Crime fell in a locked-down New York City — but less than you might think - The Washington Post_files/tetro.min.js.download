!function(){"use strict";function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function e(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var a,o,i=[],s=!0,r=!1;try{for(n=n.call(t);!(s=(a=n.next()).done)&&(i.push(a.value),!e||i.length!==e);s=!0);}catch(t){r=!0,o=t}finally{try{s||null==n.return||n.return()}finally{if(r)throw o}}return i}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var p,d=[],w=["www.washingtonpost.com","pb-impact.washingtonpost.com",".*-sandbox.washingtonpost.com","pb-dev.digitalink.com","pb-staging.digitalink.com","subs-stage.washingtonpost.com","localhost.digitalink.com","localhost.washingtonpost.com","subscribe.digitalink.com",".*.preview.now.washingtonpost.com",".*carta.digitalink.com"],g={prod:{anon:{default:864e5,optedOut:63072e6},signed:{default:864e5,optedOut:864e5}},fStage:{anon:{default:3e5,optedOut:63072e6},signed:{default:3e5,optedOut:3e5}},fqa:{anon:{default:3e5,optedOut:18e5},signed:{default:3e5,optedOut:3e5}},stage:{anon:{default:864e5,optedOut:63072e6},signed:{default:864e5,optedOut:864e5}},qa:{anon:{default:3e5,optedOut:18e5},signed:{default:3e5,optedOut:3e5}}};function f(t){for(var e=!1,n=0;n<w.length;n+=1){var a=new RegExp(w[n]);if(t.match(a)){e=!0;break}}return e}function m(){if(void 0!==p)return p;try{var t=(new Date).toString();window.localStorage.setItem(t,t);var e=window.localStorage.getItem(t)===t;return window.localStorage.removeItem(t),p=e,e}catch(t){return p=!1,!1}}function h(t){if(!t)return null;if(!document.cookie)return null;for(var e={},n=null,a=document.cookie.split(";"),o=0;o<a.length;o++)if(a[o].indexOf("=")>0){var i=a[o].split("="),s=i[0],r=i[1];s&&(s=s.trim()),s===t&&(r||(r=""),n=r.trim()),e[s]=r.trim()}return n}function v(t,e,n,a,o,i){var s,r="",c="",l=".washingtonpost.com",u=!1===o?"":";secure";n<0?r=";expires=".concat(new Date(1e3).toUTCString):n>0&&(r=";expires=".concat(new Date(n).toUTCString())),"qa"===i&&(l=".digitalink.com"),null!=l&&(c=";domain=".concat(l)),e||(e=""),s=a?e:encodeURIComponent(e);var p="".concat(t,"=").concat(s,";path=/").concat(r).concat(c).concat(u);document.cookie=p}function y(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function S(t,e,n){m()&&!y(e)&&(f(window.location.hostname)&&(e.e=Date.now()+(n||0),localStorage.setItem(t,JSON.stringify(e))))}var b=/^2\d\d$/,O={};function _(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=a.timeout||3e3;if(e=e||"GET",n=n&&JSON.stringify(n)||null,"GET"===e&&O[t])return O[t];var i=new Promise((function(i,s){var r=new XMLHttpRequest;r.open(e,t,!0),r.timeout=o,a.contentType&&r.setRequestHeader("Content-Type",a.contentType),a.hasOwnProperty("withCredentials")&&!a.withCredentials||(r.withCredentials=!0),r.onload=function(e){if(4===(e=e.target||{}).readyState&&b.test(e.status)){var n={};try{(n=JSON.parse(e.response)).statusCode=e.status,i(n),delete O[t]}catch(e){s(new Error("Failed to parse response")),delete O[t]}}else e.status>=400&&(s({message:e.status}),delete O[t])},r.onerror=function(e){s({error:"XHR"}),delete O[t]},r.ontimeout=function(){s({timeout:o}),delete O[t]},r.send(n)}));return"GET"===e&&(O[t]=i),i}function k(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]".concat(t,"(=([^&#]*)|&|#|$)")).exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function E(){if(void 0===window.crypto)return null;var t=window.crypto||window.msCrypto;return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^t.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}var C="wapo_identity",R="wapo_secure_login_id",D="wp_usp",T={iabSpec:1,explicitNotice:"Y",optOut:"N",lspa:"Y"},I={prod:{env:"prod",feLoggingApi:"https://www.washingtonpost.com/subscribe/logging/",tetroApi:"https://www.washingtonpost.com/tetro/evaluate",cookieDomain:".washingtonpost.com",LSDomain:"www.washingtonpost.com",authStatusUrl:"https://www.washingtonpost.com/subscribe/user/auth-status",sipUrl:"https://www.washingtonpost.com/subscribe/user/save-identity-preferences",checkEntitlementUrl:"https://subscribe.washingtonpost.com/swg/check-entitlement"},fStage:{env:"stage",feLoggingApi:"https://subs-stage.washingtonpost.com/logging/",tetroApi:"https://subs-stage.washingtonpost.com/tetro/evaluate",cookieDomain:".washingtonpost.com",LSDomain:"www.wapostage.com",authStatusUrl:"https://subs-stage.washingtonpost.com/user/auth-status",sipUrl:"https://subs-stage.washingtonpost.com/user/save-identity-preferences",checkEntitlementUrl:"https://subs-stage.washingtonpost.com/swg/check-entitlement"},stage:{env:"stage",feLoggingApi:"https://subs-stage.washingtonpost.com/logging/",tetroApi:"https://subs-stage.washingtonpost.com/tetro/evaluate",cookieDomain:".washingtonpost.com",LSDomain:"www.washingtonpost.com",authStatusUrl:"https://subs-stage.washingtonpost.com/user/auth-status",sipUrl:"https://subs-stage.washingtonpost.com/user/save-identity-preferences",checkEntitlementUrl:"https://subs-stage.washingtonpost.com/swg/check-entitlement"},fQa:{env:"qa",feLoggingApi:"https://subscribe.digitalink.com/logging/",tetroApi:"https://tetro.digitalink.com/evaluate",cookieDomain:".digitalink.com",LSDomain:"www.wapodev.com",authStatusUrl:"https://subscribe.digitalink.com/user/auth-status",sipUrl:"https://subscribe.digitalink.com/user/save-identity-preferences",checkEntitlementUrl:"https://subscribe.digitalink.com/swg/check-entitlement"},qa:{env:"qa",feLoggingApi:"https://subscribe.digitalink.com/logging/",tetroApi:"https://tetro.digitalink.com/evaluate",cookieDomain:".digitalink.com",LSDomain:"pb-dev.digitalink.com",authStatusUrl:"https://subscribe.digitalink.com/user/auth-status",sipUrl:"https://subscribe.digitalink.com/user/save-identity-preferences",checkEntitlementUrl:"https://subscribe.digitalink.com/swg/check-entitlement"}};function P(){var t="prod";return-1!==window.location.hostname.indexOf("localhost.wash")&&-1!==window.location.href.indexOf("/pb/")||-1!==window.location.hostname.indexOf("pb-impact")||-1!==window.location.hostname.indexOf("impact.wash")||-1!==window.location.hostname.indexOf("subs-stage")||-1!==window.location.hostname.indexOf("vforum-stage.")?t="stage":-1!==window.location.hostname.indexOf("localhost.wash")&&-1!==window.location.href.indexOf("/pf/")||-1!==window.location.hostname.indexOf("localhost.wash")&&-1!==window.location.href.indexOf(":3000")||-1!==window.location.hostname.indexOf("sandbox.wash")||-1!==window.location.hostname.indexOf("subs-stage")||-1!==window.location.hostname.indexOf("preview.now.washingtonpost.com")?t="fStage":-1!==window.location.hostname.indexOf("localhost.digitalink")&&-1!==window.location.href.indexOf("/pf/")||-1!==window.location.hostname.indexOf("localhost.digitalink")&&-1!==window.location.href.indexOf(":3000")||-1!==window.location.hostname.indexOf("www.digitalink.com")||-1!==window.location.hostname.indexOf("dev.wash")&&-1!==window.location.href.indexOf("/pf/")?t="fQa":-1===window.location.hostname.indexOf("digitalink.com")&&-1===window.location.hostname.indexOf("dev.wash")||(t="qa"),t}function U(){return I[P()]}var x={},N=window.performance&&window.performance.timing||{},j=(new Date).getTime(),A={};function L(t){Object.assign(A,t),window.pwapiPaywallResponse=A;for(var e=0;e<window.extConsumers.length;e++)window.extConsumers[e](A);for(var n=0;n<window.consumers.length;n++)window.consumers[n](A)}function G(t,e){for(var n=e.split("."),a=0,o=n.length;null!=t&&a<o;){t=t[n[a++]]}return a&&a===o?t:void 0}var Q=(new Date).getTime();function M(t){var e,n=t.appName,a=void 0===n?"site-paywall":n,o=t.locationId,i=void 0===o?"pwapi-proxy":o,s=t.logType,r=t.message,c=t.state,l=U();switch(c=c||{},r=r||"",s){case"info":default:e="logInfo";break;case"success":e="logSuccess";break;case"error":e="logHandledError";break;case"expectedError":e="logExpectedError"}var u=l.feLoggingApi;try{var p=new XMLHttpRequest;p.open("POST",u+e,!0),p.setRequestHeader("Content-Type","application/json"),c.processId=Q,c.path=window.location.pathname;var d={appName:a,locationId:i,message:r,state:c};p.withCredentials=!0,p.send(JSON.stringify(d)),p.onload=function(){},p.onerror=function(){}}catch(t){console.error("LOGGING ERROR")}}function J(t){var e;(t=t||{}).referrer=document.referrer,Object.assign(t,(e={},window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,n,a){d.indexOf(n)>=0&&(e[n]=a)})),e));var n="";for(var a in t)if(t.hasOwnProperty(a)){var o=t[a];"string"==typeof o&&""!==o&&(n+="".concat(a,"=").concat(encodeURIComponent(o.trim()),"&"))}return n}function q(t){var e=U()||{};return new Promise((function(n,a){var o,i,s={entitlements:t};if(o=document.cookie.match(/wapo_login_id=([^\;]*)/),i=document.cookie.match(/wapo_secure_login_id=([^\;]*)/),null!=o&&null!=o[1]&&null!=i&&null!=i[1])return n({status:"NOT_CHECKED",systemMessages:"User logged in"});_(e.checkEntitlementUrl,"POST",s,{contentType:"application/json"}).then((function(t){n(t)})).catch((function(t){var e={status:"ERROR",systemMessages:"Check Entitlement failed with ".concat(t.message)};n(e)}))}))}function B(t){return t&&t.isSignedIn||!1}function F(t,e){if(e&&""!==e){var n,a=e.split(","),o=[],i={fusion:{metadata:"wpMetaData",content_type:"content_type",ct_tags:"ct_tags",sct_tags:"sct_tags"},classic:{metadata:"wp_meta_data",content_type:"contentType",ct_tags:"tags_for_paywall",sct_tags:"tags_for_paywall_subs"}}[x.name],s=window[i.metadata]||{},r=i[t];n=s[r]&&s[r].split(",")||[],o=[].concat(c(n),c(a)),s[r]=o.join(","),window[i.metadata]=s}}function Y(t){var e,n,a,o,i=t.actionCodes;if(function(t){var e=!1,n=h("wp_dbg_ent");return(t.toString().indexOf("23")>=0||null!=n)&&(e=!0),e}(i)&&F("sct_tags","subs_enterprise"),t.action>0){var s=function(t){var e=[];return 0===t.userAttributes.length?"":(Object.entries(t.userAttributes).forEach((function(t){var n=r(t,2),a=n[0],o=n[1];"boolean"==typeof o?!0===o&&e.push("subs_".concat(a).toLowerCase()):""!==o&&null!==o&&e.push("subs_".concat(a,"_").concat(o).toLowerCase())})),e.join(","))}(t);F("sct_tags",s),e=k("utm_medium"),(n=k("utm_campaign"))&&["anyword"].indexOf(n)>=0&&F("ct_tags","utm_c_".concat(n)),e&&["social","email","news_tab","newsletter","referral","google","con-nat"].indexOf(e)>=0&&F("ct_tags","utm_m_".concat(e))}(t.action>0&&function(t){return t&&t.userAttributes&&t.userAttributes.isTerminated||!1}(t)&&F("ct_tags","subs_terminated"),t.action>0&&B(t)&&F("sct_tags","subs_signedin"),t.action>0&&B(t)&&F("ct_tags","subs_signedin"),t.action>0&&function(t){return t&&t.isSubscriber||!1}(t)&&F("sct_tags","subs_subscriber"),t.action>0)&&F("ct_tags",i.filter((function(t){return t.indexOf("w_")>-1})).join(","));a=!1,null!=(o=h("scroll0"))&&o.length>0&&(a=!0),a&&F("sct_tags","scroll0")}function H(t){return function(t){var e=k("utm_medium");e&&(t.tetro_utm=e)}(t),function(t){if(!m())return null;var e=JSON.parse(localStorage.getItem("wapo_identity"));void 0!==(null==e?void 0:e.dob_source)&&(t.tetro_dob_source=e.dob_source)}(t),t}var V=36e5,X=[{name:"wapo_login_id",expireOffsetMillis:V,cookiesToLocalStorage:!1,localStorageToCookies:!0,useDelimiter:!1},{name:"wapo_secure_login_id",expireOffsetMillis:V,cookiesToLocalStorage:!1,localStorageToCookies:!0,useDelimiter:!1},{name:"wp_ak_v_m",expireOffsetMillis:5184e6,cookiesToLocalStorage:!0,localStorageToCookies:!0,useDelimiter:!0,delimiterValue:"|",notEncoded:!0}];function $(t,e){var n;(n=document.createElement("script")).type="text/javascript",n.setAttribute("subscriptions-control","manual"),n.src="https://news.google.com/swg/js/v1/swg.js",n.onerror=function(){},document.head.appendChild(n),function(t,e){(window.SUBSCRIPTIONS=window.SUBSCRIPTIONS||[]).push((function(n){var a=!1,o={process:"swg-entitlement"};if(-1===window.location.href.indexOf("localhost.")&&-1===window.location.href.indexOf("local."))try{n.init("washingtonpost.com:basic"),n.getEntitlements().then((function(n){return n&&n.entitlements&&n.entitlements.length>0?(L({action:0,data:{action:0},status:"final"}),a=!0,o.numEntitlements=n.entitlements.length,o.pwresp_action=t,o.pwresp_action_final=0,o.pwresp_mtrct=e,o.raw_entitlements=JSON.stringify(n.entitlements),n.entitlements.forEach((function(t,e){if(t.source.indexOf("washingtonpost.com")>=0)o.postSWGPurchase=!0,t.subscriptionToken?o["entitlement_".concat(e)]="entitlementType=post|subscriptionToken=".concat(t.subscriptionToken):o["entitlement_".concat(e)]="entitlementType=post|subscriptionToken=".concat(t.signedEntitlements);else if(t.subscriptionToken){o.gglSWGPurchase=!0;var n=JSON.parse(t.subscriptionToken);o["entitlement_".concat(e)]="entitlementType=google|orderId=".concat(n.orderId,"|packageName=").concat(n.packageName,"|productId=").concat(n.productId,"|purchaseTime").concat(n.purchaseTime)}}))):L({status:"final"}),n})).then((function(t){a&&q(t.entitlements).then((function(t){var e=[];e.push("isEntitled=".concat(t.status)),t.createAccount&&e.push("isLinked=".concat(!t.createAccount)),t.systemMessages&&e.push("messages=".concat(t.systemMessages)),o.entitlement_status=e.join("|"),M({logType:"info",message:"swg entitlements",state:o})}))})).catch((function(){L({status:"final"})}))}catch(t){L({status:"final"})}else L({status:"final"})}))}(t,e),setTimeout((function(){"final"!==A.status&&L({status:"final"})}),5e3)}function W(t){var e=t;e.data.action,e.data.actionCodes.join(","),e.data.meterCount,e.status="processing",window.pwapiPaywallStatus=200;var n=e.data.meterCount,a={3:"paywall",6:"softwall",9:"regwall"}[e.data.action],o=e.data.wallMeterType,i="";switch(a){case"paywall":i="".concat(o||"meter","_").concat(a),2===e.data.articleWeight&&(i="double_meter_".concat(a)),e.data.meterCount=i;break;case"softwall":case"regwall":o&&(e.data.meterCount="".concat(o,"_").concat(a))}return Y(e.data),!function(){if(!m())return!1;var t=localStorage.getItem("wp_sponsored");if(window.location.search.indexOf("das=pw_spsrd_hit")>-1||window.location.search.indexOf("pw_unlock_mgclink")>-1){if(localStorage.setItem("wp_sponsored",window.location.pathname),"function"==typeof window.history.replaceState){var e=window.location.href;e=e.replace(/das=[^\&]*/,""),window.history.replaceState({},null,e)}return!0}return!(!t||window.location.pathname!==t)}()?3===e.data.action||8===e.data.action||9===e.data.action?$(e.data.action,n):e.status="final":(e.status="final",e.action=0,e.data.action=0),L(e),e}function z(t,e){t=t||{},e=e||"info",L({status:"error"});var n={process:"pwapiproxy-response",xhrstatus:t.statusCode};t.timeout&&(n.timeout=t.timeout),M({logType:e,message:t.msg,state:n})}function K(t,e){var n="v2",a="POST",o=!0,i=5e3,s=[202,469,499];return new Promise((function(r){var c,l=J(e),u=window.location.href&&window.location.href.split("?")[0]||"";c=JSON.stringify({articles:[{article:"".concat(u,"?").concat(l)}]});try{if(t){var p=new XMLHttpRequest;p.open(a,t),p.timeout=i,p.withCredentials=o,p.onload=function(){if(window["pwapi".concat(n,"Response")]=(new Date).getTime()-j,window["pwapiAPI".concat(n,"End")]=(new Date).getTime()-(N.navigationStart||0),p.readyState===XMLHttpRequest.DONE&&200===p.status){window["pwapiAPI".concat(n,"Ready")]=(new Date).getTime()-(N.navigationStart||0);var t={};try{(t=JSON.parse(p.response)).statusCode=p.status,W(t),r(t)}catch(t){t.statusCode=-1;var e={status:"error",statusCode:-1,msg:"pwapiproxy response invalid".concat(t.statusText?" - ".concat(t.statusText):"")};z(e,"error"),r(e)}}else if(p.readyState===XMLHttpRequest.DONE&&s.indexOf(p.status)>-1)r({status:"error",msg:"ignored status code"});else{var a={status:"error",statusCode:p.status,msg:"pwapiproxy invalid status code"};z(a,"error"),r(a)}},p.onerror=function(t){window["pwapiAPI".concat(n,"End")]=(new Date).getTime()-(N.navigationStart||0);var e={status:"error",statusCode:t&&t.statusCode?t.statusCode:500,msg:"pwapiproxy error"};z(e,"error"),r(e)},p.ontimeout=function(){var t={status:"error",statusCode:504,timeout:((new Date).getTime()-j)/1e3,msg:"PWAPIPROXY TIMEOUT"};z(t,"expectedError"),r(t)},p.setRequestHeader("Content-Type","application/json"),window["pwapiAPI".concat(n,"Start")]=(new Date).getTime()-(N.navigationStart||0),p.send(c)}}catch(t){var d={status:"error",statusCode:500};d.msg="pwapiproxy error".concat(t.message?" - ".concat(t.message):""),z(d,"error"),r(d)}}))}function Z(t){var e=function(){var t=(document.cookie.match(/wp_pwapi=([^\;]*);/)||{})[1]||P(),e=I[t].tetroApi||I.prod.tetroApi;if([/^www-washingtonpost-com/].some((function(t){return t.test(window.location.hostname)}))){var n=document.createElement("a");return n.href=e,n.pathname}return e}();Promise.all([K(e,t)]).then((function(){window&&window.RProfiler&&window.pwapiPaywallResponse&&"error"!==window.pwapiPaywallResponse.status&&(window.RProfiler.addInfo("tracepoint","componenttype","meteringApi"),window.pwapiAPIv2Start&&window.RProfiler.addInfo("indicator","i75761",window.pwapiAPIv2Start),window.pwapiAPIv2End&&window.RProfiler.addInfo("indicator","i2827",window.pwapiAPIv2End))})).catch((function(){}))}window.consumers=window.consumers||[],window.extConsumers=window.extConsumers||[],A.status="init",window.registerPwapiConsumer=function(t){window.consumers.push(t),t(A)},window.registerExtUpdates=function(t){window.extConsumers.push(t),t(A)},window.extListener=function(t){L(t)};var tt={};tt.pwapi_contentsection=G(window,"wpMetaData.content_section"),tt.pwapi_ct_tags=G(window,"wpMetaData.ct_tags"),tt.pwapi_sct_tags=G(window,"wpMetaData.sct_tags"),tt.commercial_node=G(window,"wpMetaData.commercial_node"),tt.content_type=G(window,"wpMetaData.content_type"),tt.is_amp="0",tt.env=window.renderingEnv||"";var et,nt=tt,at=U()||{},ot=(et=at.env,g[et]);function it(t){for(var e=0;e<window.authConsumers.length;e++)window.authConsumers[e](t)}function st(t){var e=!!h(R),n=!(!t||!t.ccpa||"Y"!==t.ccpa.optOut),a=ot&&ot[e?"signed":"anon"][n?"optedOut":"default"]||0;return Date.now()+a}function rt(){var t=null;if(m()&&localStorage.getItem(C)){var e=function(){var t=!1;if(m()&&localStorage.getItem(C)){var e=JSON.parse(localStorage.getItem(C));e.e&&Date.now()>e.e&&(t=!0)}return t}();e?m()&&localStorage.removeItem(C):t=JSON.parse(localStorage.getItem(C))}return t}function ct(t){if(m()&&f(window.location.hostname)){var e=localStorage.getItem(C);e=e&&JSON.parse(e)||{};var n=Object.assign(e,t),a=st(n.privacySetting||{});n.e=a,localStorage.setItem(C,JSON.stringify(n))}}function lt(t){if(m()&&localStorage.getItem(C))return JSON.parse(localStorage.getItem(C))[t]}function ut(t){var e,n,a;return t=t||(e=h(R),n=h(D),!1===lt("signedIn")&&e?"sip":(window.wp_meta_data&&window.wp_meta_data.tags_for_paywall&&-1!==window.wp_meta_data.tags_for_paywall.indexOf("ccpa")||window.wpMetaData&&window.wpMetaData.ct_tags&&-1!==window.wpMetaData.ct_tags.indexOf("ccpa")||!!(y(rt())||e&&!n))&&"auth-status"),new Promise((function(e,n){!1!==t?function(t){return new Promise((function(e,n){if("auth-status"===t)_("".concat(at.authStatusUrl,"?_v=").concat((new Date).getTime())).then((function(t){e(t)})).catch((function(t){n({status:"FAIL",errorState:"Auth Status failed"})}));else if("sip"===t){var a=rt(),o={caller:"SubsStorageManager",requestId:E(),authStatus:!0};o=Object.assign(o,a),_(at.sipUrl,"POST",o,{contentType:"application/json"}).then((function(t){e(t)})).catch((function(){n("Auth Status failed")}))}else n("Invalid action: ".concat(t))}))}(t).then((function(t){t&&"SUCCESS"===t.status&&ct(a=t.userState)})).finally((function(){it(a=rt()),e(a)})):(it(a=rt()),e(a))}))}function pt(t){var e=document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");return e?e[2]:null}window.authConsumers=window.authConsumers||[],window.registerAuthConsumer=function(t){window.authConsumers.push(t);var e=rt(),n=document.cookie.match(/wapo_actmgmt=([^\;]*)/);n=n&&n[1]||null,null===e&&null!==n&&n.match(/isub:1/gi)||t(rt())},window.updateIdentity=function(t){if(m()){var e=f(window.location.hostname),n=localStorage.getItem(C);if(e&&null!=n)try{n=n&&JSON.parse(n)||{};var a=Object.assign(n,t);localStorage.setItem(C,JSON.stringify(a))}catch(t){}}},window.storePrivacySetting=function(t){t="object"===n(t)?t:{};var a=lt("privacySetting")||{};if(a.ccpa=e(e(e({},T),a.ccpa),t.ccpa),!y(a)){var o=h(R),i="".concat(a.ccpa.iabSpec,a.ccpa.explicitNotice,a.ccpa.optOut,a.ccpa.lspa);if(ct({privacySetting:a}),o)ut("sip");else{var s=P(),r=st(a);v(D,i,r,!0,!0,s)}}};var dt=function(t,e){var n=t||"1NYY",a={uspString:n,uspStringSet:!1,getUSPString:function(t){return"".concat(t.iabSpec,t.explicitNotice,t.optOut,t.lspa)},setUSPString:function(t){a.uspString=t},getUSPFromLS:function(t){var o=n;if(a.uspStringSet&&a.uspString.length>=4)t(a.uspString);else try{var i=pt("wp_ucp"),s=pt("wp_geo"),r=!1;s&&(r=s.includes("|EEA")),!r&&i&&/EAC:0\|/.test(i)||s&&s.match(/^US[|]CA/)&&navigator.globalPrivacyControl?o="1YYY":pt("wp_usp")?o=pt("wp_usp"):s&&!s.match(/^US[|]CA/)&&(o="1---");try{if("1YYY"!==o&&localStorage.getItem("wapo_identity")){var c=JSON.parse(localStorage.getItem("wapo_identity"));o=a.getUSPString(c.privacySetting.ccpa)}}catch(t){}if(!o)throw e.log("no usp data in ls or cookie"),new Error("no usp data in ls or cookie");a.setUSPString(o),a.uspStringSet=!0,t(a.uspString)}catch(a){return e.debug("error in accessing usp from local storage: ".concat(a,", returning default")),void t(n)}},getUSPData:function(t,e){a.getUSPFromLS((function(n){e({version:t,uspString:n},a.uspStringSet)}))},v1:{getUSPData:function(t){t?a.getUSPData(1,t):e.log("No uspapi callback received",t)}}};return function(t){window.ucp=window.ucp||{},window.ucp.usp=window.ucp.usp||{},window.ucp.usp.uspStringSet&&(t.uspString=window.ucp.usp.uspString,t.uspStringSet=window.ucp.usp.uspStringSet),window.ucp.usp=t}(a),a},wt=function(t){try{if(navigator.globalPrivacyControl&&"CA"===t.geoState)this.uspapi.uspStringSet=!0,this.uspapi.setUSPString("1YYY");else if(t.privacySetting&&t.privacySetting.ccpa){var e=this.uspapi.getUSPString(t.privacySetting.ccpa);this.uspapi.setUSPString(e)}else t.geoState&&"CA"!=t.geoState&&this.uspapi.setUSPString("1---")}catch(t){this.logger.log("--USP DEBUG-- Auth Processing Failed",t)}},gt=function(t,e){try{window.registerAuthConsumer?window.registerAuthConsumer(wt.bind({uspapi:t,logger:e})):(window.authConsumers=window.authConsumers||[],window.authConsumers.push(wt.bind({uspapi:t,logger:e})))}catch(t){e.log("--USP DEBUG-- Can not register AuthConsumer.",t)}},ft=i((function t(e){a(this,t),window.__uspapi||function(t,e){var n=dt("1NYY",e);window.__uspapi=function(t,a,o){return n["v"+a]&&"[object Function]"==={}.toString.call(n["v"+a][t])?o?void n["v"+a][t].apply(null,[o]):(e.log("No callback"),n["v"+a][t]):(e.log("Malformed uspapi call"),!1)},window.addEventListener("message",(function(t){if(t.data.hasOwnProperty("__uspapiCall")){t.stopImmediatePropagation&&t.stopImmediatePropagation();var e=t.data.__uspapiCall.command,n=t.data.__uspapiCall.version;e&&n&&window.__uspapi(e,n,(function(e,n){var a={__uspapiReturn:{returnValue:e,callId:t.data.__uspapiCall.callId,success:n}};t.source.postMessage(a,t.origin)}))}return null}),!1),t&&t(n,e)}(gt,e)}));var mt=window&&window.location&&window.location.search.indexOf("debug=true")>-1||!1,ht=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==(e=e.toLowerCase()).toLowerCase().match(/(ready|final|error)/)&&(!window.dQ.participantStatus[t]||"error"!==window.dQ.participantStatus[t].status)){window.dQ.participantStatus[t].status=e,"final"!==e&&"error"!==e||(window.dQ.participantStatus[t].readyDisplay=!1);var a=window.dQ.participants.filter((function(t){return window.dQ.participantStatus[t]&&""===window.dQ.participantStatus[t].status}));mt&&console.log("still waiting on response from: ".concat(JSON.stringify(a)));var o=!0,i=window.dQ.participants.filter((function(t){var e=window.dQ.participantStatus[t];return!!e&&("ready"!==e.status&&"final"!==e.status&&(o=!1),"ready"===e.status&&!1===e.readyDisplay&&!0===o)}));if(mt&&console.log("displayable queue: ".concat(JSON.stringify(i))),i.length>0){window.dQ.displayableGroup=window.dQ.participantStatus[i[0]]&&window.dQ.participantStatus[i[0]].displayGroup;for(var s=window.dQ.displayable[window.dQ.displayableGroup],r=window.dQ.participants.filter((function(t){var e=window.dQ.participantStatus[t];return!!e&&("ready"===e.status&&e.displayGroup===window.dQ.displayableGroup)})),c=0;c<i.length;c+=1){var l=window.dQ.participantStatus[i[c]];l&&l.displayGroup===window.dQ.displayableGroup&&s.concurrent_displayable>=r.length&&window.dQ.displayable.total<=window.dQ.displayable.max&&(l.readyDisplay=!0,window.dQ.displayable.total+=1)}for(var u=0;u<window.dConsumers.length;u+=1){var p=window.dConsumers[u],d=p.participant,w=p.callback;i.indexOf(d)>=0&&w(window.dQ.participantStatus[d])}}else if(n instanceof Object&&n.alwaysRunCallback)for(var g=0;g<window.dConsumers.length;g+=1){var f=window.dConsumers[g],m=f.participant,h=f.callback;h(window.dQ.participantStatus[m])}mt&&console.log(" Display Group: ".concat(window.dQ.displayableGroup,"\n\n        Total Displayed: ").concat(window.dQ.displayable.total,"\n\n        Max Displayable: ").concat(window.dQ.displayable.max,"\n\n        Current participantStatus queue: ").concat(JSON.stringify(window.dQ.participantStatus).replaceAll("},","},\n")))}},vt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.participant,n=t.callback;window.dConsumers.push(t),n(window.dQ.participantStatus[e])},yt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=t?[t]:window.dQ.participants,a=n.filter((function(t){var n=window.dQ.participantStatus[t],a=n.info?e({},n.info):{};return n&&null!=n.timeout&&"ready"!==n.status&&"timer started"!==a.statusMsg}));a.forEach((function(t){var n=window.dQ.participantStatus[t];n.info=n.info?e({},n.info):{},n.info.statusMsg="timer started",setTimeout((function(t){var e=window.dQ.participantStatus[t];if("ready"!==e.status||"final"!==e.status){var n="final"===e.status?"timer ended":"timeout";window.registerDisplay({participant:t,status:"final",info:{statusMsg:n}});var a=window.dConsumers.filter((function(e){return e.participant===t}));if(a.length>0&&"timeout"===n)for(var o=0;o<a.length;o+=1)a[o].callback(e)}}),n.timeout,n.name)}))},St="GetroSetro",bt="getroSetroQueue",Ot=["get","set"],_t=36e5,kt=5e3,Et=Object.freeze({DEBUG:"DEBUG",INFO:"INFO",ERROR:"ERROR"}),Ct=Object.freeze({DEBUG:[Et.DEBUG,Et.INFO,Et.ERROR],INFO:[Et.INFO,Et.ERROR],ERROR:[Et.ERROR],NONE:[]}),Rt=[],Dt={},Tt={},It={logLevel:Et.ERROR,ttl:_t,lastUpdatedTTL:6e4},Pt={logLevel:Et.DEBUG,ttl:_t,disableLS:!1,disableCheckPref:!1},Ut=function(t){return setTimeout((function(){return t()}),0)},xt=function(t){window.dispatchEvent(new CustomEvent(St,{detail:t}))},Nt=function(t,e){return xt({type:"value",preference:e,value:t})},jt=function(t,e){return xt({type:"update",preference:e,value:t})},At=function(t,e){return xt({type:"verified",preference:e,value:t})};function Lt(t){var e=t.level,n=t.location,a=t.message,o=t.obj,i={timestamp:Date.now(),level:e,location:n,message:a};if(o&&Ct.DEBUG.includes(this.settings.logLevel)&&(i.obj=o),Rt.push(i),Ct.INFO.includes(e)&&(e===Et.INFO&&M({appName:St,locationId:n,logType:"info",message:a}),e===Et.ERROR&&(o=o instanceof Error?{lineNumber:o.lineNumber,message:o.message}:o,M({appName:St,locationId:n,logType:"error",message:a,state:o||{}}))),Ct[this.settings.logLevel].includes(e)){var s="[".concat(St,"][").concat(n,"][").concat(e,"]: ").concat(a);e===Et.ERROR?console.error(s):console.info(s),o&&this.settings.logLevel===Et.DEBUG&&console.info(o)}}function Gt(){try{var t=m()?JSON.parse(localStorage.getItem(St)):{};return(null==t?void 0:t.GetroSetro)||{}}catch(t){Lt.call(this,{level:Et.ERROR,location:"getSettings",message:"Failed to load settings",obj:t})}return{}}function Qt(){try{var t=this.settings.hasLocalStorage?JSON.parse(localStorage.getItem(St)):Dt;return null==t||delete t.GetroSetro,t||{}}catch(t){Lt.call(this,{level:Et.ERROR,location:"getPreferences",message:"Failed to load preferences",obj:t})}return{}}function Mt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),e=Qt.call(this);return Object.entries(e).filter((function(e){var n=r(e,2);return n[0],n[1].timestamp<t})).map((function(t){return r(t,1)[0]}))}function Jt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Gt.call(this),a=Qt.call(this);if(Object.keys(n).length)Lt.call(this,{level:Et.DEBUG,location:"setDebug",message:"debug mode disabled"}),this.settings=e(e(e({},this.settings),Pt),It);else{var o=e(e({},Pt),t);this.settings=e(e({},this.settings),o),a[St]=o,Lt.call(this,{level:Et.DEBUG,location:"setDebug",message:"debug mode enabled"})}if(a!==Dt)try{localStorage.setItem(St,JSON.stringify(a)),Lt.call(this,{level:Et.DEBUG,location:"setDebug",message:"debug mode stashed"})}catch(t){Lt.call(this,{level:Et.DEBUG,location:"setDebug",message:"localStorage error",obj:t})}}var qt=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(t=window)||void 0===t||null===(e=t.location)||void 0===e?void 0:e.hostname;return n.includes("www")?"checkpref.washingtonpost.com":["preview.now.washingtonpost.com","pb-impact","subs-stage"].some((function(t){return n.includes(t)}))?"checkpref-stage.washingtonpost.com":n.includes("subs-preprod")?"checkpref-preprod.washingtonpost.com":["subs-dev","subscribe"].some((function(t){return n.includes(t)}))?"checkpref-dev.washingtonpost.com":n};function Bt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location,e=t.origin,n=t.hostname;return"".concat(e.replace(n,qt(n)),"/user/").concat(this.settings.loginID)}function Ft(){var t=this;return new Promise((function(n,a){t.settings.disableCheckPref&&n({lastUpdated:null});var o=Date.now();o-t.settings.lastUpdatedTimestamp<t.settings.lastUpdatedTTL?n({lastUpdated:t.settings.lastUpdated}):_(Bt.call(t),null,null,{withCredentials:!1,timeout:kt}).then((function(a){var i=a.lastUpdated;t.settings=e(e({},t.settings),{},{lastUpdated:i,lastUpdatedTimestamp:o}),n(a)})).catch(a)}))}var Yt=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(t=window)||void 0===t||null===(e=t.location)||void 0===e?void 0:e.hostname;return n.includes("www")?"subscribe.washingtonpost.com":[".preview.now.washingtonpost.com","pb-impact","subs-stage"].some((function(t){return n.includes(t)}))?"subs-stage.washingtonpost.com":n},Ht=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===(e=window)||void 0===e?void 0:e.location,a=n.origin,o=n.hostname;return t=(t=Array.isArray(t)?t:[t]).map((function(t){return"preferences=".concat(t)})).join("&"),"".concat(a.replace(o,Yt(o)),"/preferenceapi/v1/current/preferences/get?").concat(t)},Vt=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===(e=window)||void 0===e?void 0:e.location,a=n.origin,o=n.hostname;return"".concat(a.replace(o,Yt(o)),"/preferenceapi/v1/current/preferences/").concat(t,"/set")};function Xt(t){return Qt.call(this)[t]||{value:void 0,timestamp:void 0}}function $t(t,e){if(t!==St){var a=Date.now(),o="object"===n(e)?JSON.stringify(e):e;if(this.settings.hasLocalStorage)try{var i=JSON.parse(localStorage.getItem(St))||{};i[t]={value:e,timestamp:a},localStorage.setItem(St,JSON.stringify(i)),Lt.call(this,{level:Et.DEBUG,location:"stashLocal",message:"".concat(t,":").concat(o," [localStorage]")})}catch(t){Lt.call(this,{level:Et.ERROR,location:"stashLocal",message:"Failed to store locally",obj:t})}else Dt[t]={value:e,timestamp:a},Lt.call(this,{level:Et.DEBUG,location:"stashLocal",message:"".concat(t,":").concat(o," [shortTermMemory]")})}}function Wt(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t=Array.isArray(t)?t:[t];var o=Qt.call(this),i=Object.keys(Tt),s=t.reduce((function(t,e){var n=t.prefsRequested,a=t.prefsToRequest;return i.includes(e)?n.push(e):a.push(e),{prefsRequested:n,prefsToRequest:a}}),{prefsRequested:[],prefsToRequest:[]}),r=s.prefsRequested,c=s.prefsToRequest;r.forEach((function(t){Tt[t].callbacks.push(n),Tt[t].verifiers.push(a)})),c.length&&(c.forEach((function(t){Tt[t]={callbacks:[jt,n],verifiers:[At,a]}})),_(Ht(c),null,null,{timeout:kt}).then((function(t){var n=c;"SUCCESS"===(null==t?void 0:t.status)&&Array.isArray(null==t?void 0:t.preferenceValues)?(t.preferenceValues.forEach((function(a){var i,s=a.id.preference.name,r=a.value;n=n.filter((function(t){return t!==s}));var c=JSON.stringify(r);$t.call(e,s,r),JSON.stringify(null===(i=o[s])||void 0===i?void 0:i.value)!==c?Tt[s].callbacks.forEach((function(t){return t(r,s)})):Tt[s].verifiers.forEach((function(t){return t(r,s)})),Lt.call(e,{level:Et.DEBUG,location:"fetchRemote",message:"".concat(s,":").concat(c," - success"),obj:t})})),n.forEach((function(t){return Tt[t].verifiers.forEach((function(e){return e(void 0,t)}))}))):Lt.call(e,{level:Et.ERROR,location:"fetchRemote",message:"".concat(c," - failure ").concat(t.state),obj:t})})).catch((function(t){Lt.call(e,{level:Et.ERROR,location:"fetchRemote",message:"".concat(c," - error"),obj:t})})).finally((function(){c.forEach((function(t){return delete Tt[t]}))})))}function zt(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};e=Array.isArray(e)?e:[e];var i=!0,s=Qt.call(this);e.length&&Ft.call(this).then((function(s){var r=s.lastUpdated;!r||!n||r>n?(Lt.call(t,{level:Et.INFO,location:"fetchRemoteCheck",message:"".concat(e," - stale [lastUpdated: ").concat(r," local: ").concat(n,"]")}),i=!1,Wt.call(t,e,a,o)):Lt.call(t,{level:Et.INFO,location:"fetchRemoteCheck",message:"".concat(e," - fresh [lastUpdated: ").concat(r," local: ").concat(n,"]")})})).catch((function(e){Lt.call(t,{level:Et.ERROR,location:"fetchRemoteCheck",message:"checkpref - failure",obj:e})})).finally((function(){i&&e.forEach((function(t){var e,n;At(null===(e=s[t])||void 0===e?void 0:e.value,t),o(null===(n=s[t])||void 0===n?void 0:n.value,t)}))}))}function Kt(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0;if(e&&void 0!==a){var o="object"===n(a)?JSON.stringify(a):a;_(Vt(e),"POST",{value:a},{contentType:"application/json",timeout:kt}).then((function(n){"SUCCESS"===n.status&&$t.call(t,e,a),Lt.call(t,{level:Et.DEBUG,location:"stashRemote",message:"".concat(e,":").concat(o," - success"),obj:n})})).catch((function(n){return Lt.call(t,{level:Et.ERROR,location:"stashRemote",message:"".concat(e,":").concat(o," - failure"),obj:n})}))}}function Zt(t,e,n,a){var o=Date.now()-this.settings.ttl;!e||e<o?(e?Lt.call(this,{level:Et.INFO,location:"getLocalCheck",message:"".concat(t," - stale [TTL: ").concat(this.settings.ttl,"]")}):Lt.call(this,{level:Et.DEBUG,location:"getLocalCheck",message:"".concat(t," - no result")}),zt.call(this,t,e,n,a)):Lt.call(this,{level:Et.INFO,location:"getLocalCheck",message:"".concat(t," - fresh [TTL: ").concat(this.settings.ttl,"]")})}function te(){var t=this;return new Promise((function(e){Mt.call(t,Date.now()-t.settings.ttl).length?Ft.call(t).then((function(n){var a=n.lastUpdated;e(Mt.call(t,a))})).catch((function(n){Lt.call(t,{level:Et.ERROR,location:"initialGet",message:"checkpref - failure",obj:n}),e([])})):e([])}))}function ee(){var t=Qt.call(this),e=window[bt]||[];return delete window[bt],e.filter((function(e){return!t.hasOwnProperty(e)||(Nt(t[e].value,e),!1)}))}function ne(){var t=this,e=ee.call(this);te.call(this).then((function(n){return Wt.call(t,[].concat(c(e),c(n)))}))}var ae=function(){function t(){var n=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var i=m(),s=h("wapo_login_id"),r=Gt();this.settings=e(e(e({},It),o),r),this.settings.hasLocalStorage=!r.disableLS&&i,this.settings.loginID=s,this.settings.logLevel===Et.DEBUG&&(this.getLog=function(){return Rt}),s?(Ot.forEach((function(t){n[t]=n[t].bind(n)})),ne.call(this),Ut((function(){return xt({type:"ready",getroSetro:n})}))):Ot.forEach((function(t){n[t]=function(){}}))}return i(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(t&&"string"==typeof t){var a=Xt.call(this,t),o=a.value,i=a.timestamp;return Nt(o,t),Zt.call(this,t,i,e,n),o}}},{key:"set",value:function(t,e){"upupdowndownleftrightleftrightbastart"===t?Jt.call(this,e):t&&"string"==typeof t&&Kt.call(this,t,e)}}]),t}();x.name="fusion",window.pwapiVersion="Version 1.21.1 on Tue, 28 Jun 2022 16:17:22 GMT",window.pwapiStart=j-(N.navigationStart||0),function(){var t={status:"",readyDisplay:!1,hasProcessed:!1,displayGroup:"2"},n=window.dQ||{};n.hold=n.hold||[],window.dConsumers=window.dConsumers||[],n=Object.assign(n,{displayable:{max:3,total:0,1:{concurrent_displayable:1},2:{concurrent_displayable:1}},status:"init",participantStatus:{iab_banner:{name:"iab_banner",status:"",readyDisplay:!1,hasProcessed:!1,displayGroup:"1",timeout:3e4},paywall:{name:"paywall",status:"",readyDisplay:!1,hasProcessed:!1,displayGroup:"1"},regwall:{name:"regwall",status:"",readyDisplay:!1,hasProcessed:!1,displayGroup:"1"},softwall:{name:"softwall",status:"",readyDisplay:!1,hasProcessed:!1,displayGroup:"2"}}});var a=["paywall","regwall","iab_banner","softwall"];for("1"!==(document.cookie.match("wp_ak_ot=(1)[^;]*(;|$)")?RegExp.$1:"")&&a.splice(2,1),n.participants=n.participants||a,window.dQ=n,window.registerDisplay=function(){var a=arguments.length<=0?void 0:arguments[0],o=a.participant,i=a.status,s=a.callback,r=a.info,c=void 0===r?null:r,l=a.config,u=void 0===l?{}:l;(Array.isArray(o)?o:o.split()).forEach((function(a){var o=a;o&&(n.participantStatus[o]||(n.participantStatus[o]=e(e(e({name:o},t),u),null!==c&&{info:c}),n.participants.push(o))),o&&s?vt({participant:o,callback:s}):o&&i?(null!==c&&Object.assign(n.participantStatus[o],{info:e(e({},n.participantStatus[o].info),c)}),ht(o,i,c)):o&&c?(Object.assign(n.participantStatus[o],{info:e(e({},n.participantStatus[o].info),c)}),window.dConsumers.filter((function(t){return t.participant===o})).forEach((function(t){t.callback(n.participantStatus[t.participant])}))):s||i||c||!o||(n.participantStatus[o]=e(e(e({name:o},t),n.participantStatus[o]),u),n.participants.indexOf(o)<0&&n.participants.push(o)),u.timeout&&yt(o)}))};n.hold.length>0;){var o=n.hold.splice(0,1);window.registerDisplay(o[0])}}(),window.registerPwapiConsumer((function(t){"error"!==t.status&&0!==t.action||(window.registerDisplay({participant:"paywall",status:"final"}),window.registerDisplay({participant:"softwall",status:"final"}),window.registerDisplay({participant:"regwall",status:"final"}))})),H(nt),Z(nt),yt(),function(t){var e={},n={};if(m()){for(var a=0;a<X.length;a++){var o=X[a];try{var i=o.name,s=h(i),r=localStorage.getItem(i),c={};if(r)try{(c=JSON.parse(r)).e<(new Date).getTime()&&(c={},localStorage.removeItem(i))}catch(t){c={},localStorage.removeItem(i)}var l=null!=s,u=null!=c.v;if(u&&!l&&o.localStorageToCookies&&(v(i,c.v,c.e,o.notEncoded,!0,t),n[i]=c.v),!u&&l&&o.cookiesToLocalStorage&&S(i,{v:s},o.expireOffsetMillis),l&&u&&o.useDelimiter){var p=o.delimiterValue||"|",d=s.split(p),w=c.v.split(p);o.cookiesToLocalStorage&&d&&w&&d[1]&&d[1]!==w[1]?S(i,{v:s},o.expireOffsetMillis):o.localStorageToCookies&&d&&w&&d[0]!==w[0]&&(!d[1]||d[1]===w[1])&&v(i,c.v,c.e||Date.now()+o.expireOffsetMillis,o.notEncoded,!0,t)}}catch(t){console.error("Unable to synchCookiesAndLocalStorage for synchCookie item: ".concat(JSON.stringify(o)),t)}}try{(Object.keys(n).length>0||Object.keys(e).length>0)&&M({logType:"info",message:"User storage Synced",state:{process:"storage-sync","cookie-sync":JSON.stringify(e),"ls-sync":JSON.stringify(n)}})}catch(t){}}}(P()),window.getroSetro=new ae,function(){try{new ft({log:function(){},debug:console.debug})}catch(t){console.error("USP API attachment may have failed.")}}();try{setTimeout((function(){ut()}),0)}catch(t){}}();
